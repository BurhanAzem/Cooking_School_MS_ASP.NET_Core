2023-06-16 08:51:20.778 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 08:51:21.161 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 08:51:21.162 +03:00  INF  Hosting environment: Development
2023-06-16 08:51:21.162 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 08:51:21.209 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 08:51:21.733 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 08:51:21.736 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 528.1081ms
2023-06-16 08:51:21.740 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.1308ms
2023-06-16 08:51:22.004 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 08:51:22.107 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 103.3907ms
2023-06-16 08:51:22.599 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 08:51:22.791 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 192.0128ms
2023-06-16 08:52:19.515 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admins application/json 245
2023-06-16 08:52:20.134 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 08:52:20.165 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 08:52:20.165 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 08:52:20.165 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 08:52:21.813 +03:00  INF  Executed DbCommand (53ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:52:22.063 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/15/2023 8:10:56 AM', Current time: '6/16/2023 5:52:22 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 08:52:22.090 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/15/2023 8:10:56 AM', Current time: '6/16/2023 5:52:22 AM'.
2023-06-16 08:52:22.094 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.RegisterAdmin (Cooking_School)'
2023-06-16 08:52:22.167 +03:00  INF  Route matched with {action = "RegisterAdmin", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAdmin(Cooking_School.Services.Dtos.AdminDto.CreateAdminDto) on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 08:52:22.345 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.AdminDto.CreateAdminDto
2023-06-16 08:52:22.362 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__createAdminDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__createAdminDto_Email_0
2023-06-16 08:52:22.530 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 8000) (DbType = Binary), @p9='?' (Size = 8000) (DbType = Binary), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [BirthDate], [Created], [Deleted], [Discriminator], [Email], [FirstName], [LastName], [PasswordHashed], [PasswordSlot], [PhoneNumber], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2023-06-16 08:52:22.557 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.AdminDto.AdminDTO'.
2023-06-16 08:52:22.582 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.RegisterAdmin (Cooking_School) in 411.3461ms
2023-06-16 08:52:22.582 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.RegisterAdmin (Cooking_School)'
2023-06-16 08:52:22.585 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admins application/json 245 - 200 168 application/json;+charset=utf-8 3070.4598ms
2023-06-16 08:52:37.111 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38
2023-06-16 08:52:37.117 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 5:52:37 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 08:52:37.117 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 5:52:37 AM'.
2023-06-16 08:52:37.117 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 08:52:37.121 +03:00  INF  Route matched with {action = "Login", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 08:52:37.130 +03:00  INF  Login Attempt for adminLoginDto 
2023-06-16 08:52:37.175 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 08:52:37.197 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 08:52:37.234 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 08:52:37.253 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 08:52:37.261 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 08:52:37.263 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.Login (Cooking_School) in 142.223ms
2023-06-16 08:52:37.263 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 08:52:37.264 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38 - 202 753 application/json;+charset=utf-8 152.8071ms
2023-06-16 08:53:03.847 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 08:53:03.861 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:53:03.933 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 08:53:03.935 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 08:53:03.940 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 08:53:04.778 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 08:53:04.785 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 08:53:04.790 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Core.ModelUsed.Meal, Cooking_School.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 08:53:04.792 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 856.6962ms
2023-06-16 08:53:04.792 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 08:53:04.792 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 200 2 application/json;+charset=utf-8 945.4791ms
2023-06-16 08:53:26.497 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admin/chefs multipart/form-data;+boundary=--------------------------539736305718470140073965 30199
2023-06-16 08:53:26.501 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:53:26.504 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.RegisterChef (Cooking_School)'
2023-06-16 08:53:26.508 +03:00  INF  Route matched with {action = "RegisterChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterChef(Cooking_School.Services.Dtos.ChefDto.CreateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:53:26.574 +03:00  INF   Attempt Sinup for createChefDto 
2023-06-16 08:53:26.582 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__createChefDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__createChefDto_Email_0
2023-06-16 08:53:28.001 +03:00  INF  Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 8000) (DbType = Binary), @p11='?' (Size = 8000) (DbType = Binary), @p12='?' (DbType = Int32), @p13='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [BirthDate], [Created], [CvPath], [Deleted], [Discriminator], [Email], [FavoriteN], [FirstName], [LastName], [PasswordHashed], [PasswordSlot], [PhoneNumber], [Salary], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-06-16 08:53:28.008 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.ChefDto.ChefDTO'.
2023-06-16 08:53:28.014 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.RegisterChef (Cooking_School) in 1505.5496ms
2023-06-16 08:53:28.014 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.RegisterChef (Cooking_School)'
2023-06-16 08:53:28.014 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admin/chefs multipart/form-data;+boundary=--------------------------539736305718470140073965 30199 - 200 332 application/json;+charset=utf-8 1517.2661ms
2023-06-16 08:54:17.514 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------207882534571093146804824 105230
2023-06-16 08:54:17.518 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:54:17.522 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:54:17.526 +03:00  INF  Route matched with {action = "UpdateChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateChef(Int32, Cooking_School.Services.Dtos.ChefDto.UpdateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:54:17.568 +03:00  INF   Attempt Update for updateChefDto 
2023-06-16 08:54:17.581 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__id_0
2023-06-16 08:54:17.659 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School) in 132.9329ms
2023-06-16 08:54:17.661 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:54:17.796 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------207882534571093146804824 105230 - 400 - application/json 281.6838ms
2023-06-16 08:54:29.910 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------537551824803973376990120 105231
2023-06-16 08:54:29.913 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:54:29.914 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:54:29.914 +03:00  INF  Route matched with {action = "UpdateChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateChef(Int32, Cooking_School.Services.Dtos.ChefDto.UpdateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:54:29.926 +03:00  INF   Attempt Update for updateChefDto 
2023-06-16 08:54:29.928 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__id_0
2023-06-16 08:54:29.953 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School) in 39.3141ms
2023-06-16 08:54:29.954 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:54:30.048 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------537551824803973376990120 105231 - 400 - application/json 138.3537ms
2023-06-16 08:54:51.370 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admin/chefs multipart/form-data;+boundary=--------------------------554093674944327193594113 30199
2023-06-16 08:54:51.374 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:54:51.374 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.RegisterChef (Cooking_School)'
2023-06-16 08:54:51.375 +03:00  INF  Route matched with {action = "RegisterChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterChef(Cooking_School.Services.Dtos.ChefDto.CreateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:54:51.382 +03:00  INF   Attempt Sinup for createChefDto 
2023-06-16 08:54:51.385 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__createChefDto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__createChefDto_Email_0
2023-06-16 08:54:51.412 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.RegisterChef (Cooking_School) in 37.6249ms
2023-06-16 08:54:51.413 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.RegisterChef (Cooking_School)'
2023-06-16 08:54:51.525 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admin/chefs multipart/form-data;+boundary=--------------------------554093674944327193594113 30199 - 400 - application/json 154.5051ms
2023-06-16 08:55:04.627 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------536371432907471991265235 105231
2023-06-16 08:55:04.630 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:55:04.631 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:55:04.631 +03:00  INF  Route matched with {action = "UpdateChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateChef(Int32, Cooking_School.Services.Dtos.ChefDto.UpdateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:55:04.645 +03:00  INF   Attempt Update for updateChefDto 
2023-06-16 08:55:04.648 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__id_0
2023-06-16 08:55:04.669 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School) in 38.2554ms
2023-06-16 08:55:04.670 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:55:04.763 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------536371432907471991265235 105231 - 400 - application/json 135.5815ms
2023-06-16 08:55:23.532 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------840402375719767905856606 105231
2023-06-16 08:55:23.535 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:55:23.535 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:55:23.536 +03:00  INF  Route matched with {action = "UpdateChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateChef(Int32, Cooking_School.Services.Dtos.ChefDto.UpdateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:55:23.542 +03:00  INF   Attempt Update for updateChefDto 
2023-06-16 08:55:23.543 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__id_0
2023-06-16 08:55:23.567 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School) in 31.0316ms
2023-06-16 08:55:23.567 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:55:23.659 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/7 multipart/form-data;+boundary=--------------------------840402375719767905856606 105231 - 400 - application/json 126.8220ms
2023-06-16 08:56:04.364 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 08:56:04.607 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 08:56:04.609 +03:00  INF  Hosting environment: Development
2023-06-16 08:56:04.612 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 08:56:04.641 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 08:56:04.947 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 307.7274ms
2023-06-16 08:56:04.949 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 08:56:04.957 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 2.6518ms
2023-06-16 08:56:05.130 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 08:56:05.208 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 78.0847ms
2023-06-16 08:56:06.263 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 08:56:06.383 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 120.4023ms
2023-06-16 08:56:21.881 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38
2023-06-16 08:56:22.107 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 5:56:22 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 08:56:22.140 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 5:56:22 AM'.
2023-06-16 08:56:22.142 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 08:56:22.165 +03:00  INF  Route matched with {action = "Login", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 08:56:22.370 +03:00  INF  Login Attempt for adminLoginDto 
2023-06-16 08:56:23.002 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 08:56:23.032 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 08:56:23.032 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 08:56:23.032 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 08:56:23.815 +03:00  INF  Executed DbCommand (42ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 08:56:23.948 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 08:56:23.978 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 08:56:24.088 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 08:56:24.134 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 08:56:24.150 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 08:56:24.180 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.Login (Cooking_School) in 2011.3612ms
2023-06-16 08:56:24.181 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 08:56:24.184 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38 - 202 753 application/json;+charset=utf-8 2302.6928ms
2023-06-16 08:57:09.724 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/8 multipart/form-data;+boundary=--------------------------385262886913561977972850 105231
2023-06-16 08:57:09.785 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:57:09.806 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:57:09.813 +03:00  INF  Route matched with {action = "UpdateChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateChef(Int32, Cooking_School.Services.Dtos.ChefDto.UpdateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:57:09.941 +03:00  INF   Attempt Update for updateChefDto 
2023-06-16 08:57:09.952 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__id_0
2023-06-16 08:57:15.833 +03:00  INF  Executed DbCommand (10ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 8000) (DbType = Binary), @p10='?' (Size = 8000) (DbType = Binary), @p11='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [BirthDate] = @p1, [Created] = @p2, [CvPath] = @p3, [Deleted] = @p4, [Email] = @p5, [FavoriteN] = @p6, [FirstName] = @p7, [LastName] = @p8, [PasswordHashed] = @p9, [PasswordSlot] = @p10, [PhoneNumber] = @p11, [Salary] = @p12, [Updated] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2023-06-16 08:57:15.849 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.ChefDto.ChefDTO'.
2023-06-16 08:57:15.870 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School) in 6056.0604ms
2023-06-16 08:57:15.870 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:57:15.872 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/8 multipart/form-data;+boundary=--------------------------385262886913561977972850 105231 - 200 376 application/json;+charset=utf-8 6147.9704ms
2023-06-16 08:57:39.724 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/8 multipart/form-data;+boundary=--------------------------366962847272450760440900 214944
2023-06-16 08:57:39.747 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:57:39.753 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:57:39.754 +03:00  INF  Route matched with {action = "UpdateChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateChef(Int32, Cooking_School.Services.Dtos.ChefDto.UpdateChefDto) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:57:39.779 +03:00  INF   Attempt Update for updateChefDto 
2023-06-16 08:57:39.782 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__id_0
2023-06-16 08:57:42.848 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 8000) (DbType = Binary), @p10='?' (Size = 8000) (DbType = Binary), @p11='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [BirthDate] = @p1, [Created] = @p2, [CvPath] = @p3, [Deleted] = @p4, [Email] = @p5, [FavoriteN] = @p6, [FirstName] = @p7, [LastName] = @p8, [PasswordHashed] = @p9, [PasswordSlot] = @p10, [PhoneNumber] = @p11, [Salary] = @p12, [Updated] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2023-06-16 08:57:42.849 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.ChefDto.ChefDTO'.
2023-06-16 08:57:42.849 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School) in 3095.7089ms
2023-06-16 08:57:42.849 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.UpdateChef (Cooking_School)'
2023-06-16 08:57:42.850 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/chefs/8 multipart/form-data;+boundary=--------------------------366962847272450760440900 214944 - 200 354 application/json;+charset=utf-8 3126.5799ms
2023-06-16 08:58:49.831 +03:00  INF  Request starting HTTP/1.1 DELETE https://localhost:44359/api/admin/chefs/8 - -
2023-06-16 08:58:49.836 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:58:49.845 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.DeleteChef (Cooking_School)'
2023-06-16 08:58:49.848 +03:00  INF  Route matched with {action = "DeleteChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteChef(Int32) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:58:49.851 +03:00  INF  Attempt To Delete Chef
2023-06-16 08:58:49.861 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef' AND [u].[Id] = @__chefId_0
2023-06-16 08:58:50.109 +03:00  INF  Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 08:58:50.110 +03:00  INF  Executing OkObjectResult, writing value of type 'System.String'.
2023-06-16 08:58:50.111 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.DeleteChef (Cooking_School) in 262.5467ms
2023-06-16 08:58:50.111 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.DeleteChef (Cooking_School)'
2023-06-16 08:58:50.111 +03:00  INF  Request finished HTTP/1.1 DELETE https://localhost:44359/api/admin/chefs/8 - - - 200 - text/plain;+charset=utf-8 280.1722ms
2023-06-16 08:58:55.106 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/chefs?PageNumber=1&PageSize=1 - -
2023-06-16 08:58:55.113 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:58:55.114 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School)'
2023-06-16 08:58:55.117 +03:00  INF  Route matched with {action = "GetAllChefs", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllChefs(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:58:55.176 +03:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
2023-06-16 08:58:55.185 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 08:58:55.186 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 08:58:55.195 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 08:58:55.204 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ChefDto.ChefDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 08:58:55.205 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School) in 87.9733ms
2023-06-16 08:58:55.205 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School)'
2023-06-16 08:58:55.205 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/chefs?PageNumber=1&PageSize=1 - - - 200 334 application/json;+charset=utf-8 98.9376ms
2023-06-16 08:59:06.456 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/chefs/favorite - -
2023-06-16 08:59:06.460 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:59:06.461 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.GetAllFavoriteChef (Cooking_School)'
2023-06-16 08:59:06.465 +03:00  INF  Route matched with {action = "GetAllFavoriteChef", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteChef() on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 08:59:06.483 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[ChefId1], [f].[Created], [f].[Deleted], [f].[TraineeId], [f].[Updated]
FROM [Favorite_chefs] AS [f]
2023-06-16 08:59:06.494 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
2023-06-16 08:59:06.497 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ChefDto.FavoriteChefDto, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 08:59:06.499 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.GetAllFavoriteChef (Cooking_School) in 34.4906ms
2023-06-16 08:59:06.499 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.GetAllFavoriteChef (Cooking_School)'
2023-06-16 08:59:06.499 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/chefs/favorite - - - 200 2 application/json;+charset=utf-8 43.8072ms
2023-06-16 08:59:37.635 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admin/courses application/json 112
2023-06-16 08:59:37.640 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:59:37.642 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School)'
2023-06-16 08:59:37.647 +03:00  INF  Route matched with {action = "CreateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCourse(Cooking_School.Services.Dtos.CookClassDto.CreateCourseDto) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 08:59:37.652 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 08:59:37.662 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__createCourseDto_CourseName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[CourseName] = @__createCourseDto_CourseName_0
2023-06-16 08:59:37.690 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Courses] ([CourseLevel], [CourseName], [Created], [Deleted], [Description], [FavoriteN], [Price], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2023-06-16 08:59:37.695 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 08:59:37.698 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School) in 51.5126ms
2023-06-16 08:59:37.699 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School)'
2023-06-16 08:59:37.699 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admin/courses application/json 112 - 200 170 application/json;+charset=utf-8 63.4946ms
2023-06-16 08:59:41.710 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=1 - -
2023-06-16 08:59:41.713 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:59:41.713 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 08:59:41.716 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 08:59:41.718 +03:00  INF  Attempt GetAll of Project 
2023-06-16 08:59:41.727 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 08:59:41.730 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 08:59:41.730 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 08:59:41.739 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 08:59:41.743 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 08:59:41.744 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 28.2205ms
2023-06-16 08:59:41.744 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 08:59:41.745 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=1 - - - 200 170 application/json;+charset=utf-8 35.1457ms
2023-06-16 08:59:55.832 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=1 - -
2023-06-16 08:59:55.838 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 08:59:55.839 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 08:59:55.839 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 08:59:55.840 +03:00  INF  Attempt GetAll of Project 
2023-06-16 08:59:55.842 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 08:59:55.845 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 08:59:55.845 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 08:59:55.846 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 6.6694ms
2023-06-16 08:59:55.846 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 08:59:55.846 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=1 - - - 200 170 application/json;+charset=utf-8 13.8562ms
2023-06-16 09:00:10.481 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admin/courses application/json 112
2023-06-16 09:00:10.484 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:00:10.485 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School)'
2023-06-16 09:00:10.486 +03:00  INF  Route matched with {action = "CreateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCourse(Cooking_School.Services.Dtos.CookClassDto.CreateCourseDto) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:00:10.487 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:00:10.491 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__createCourseDto_CourseName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[CourseName] = @__createCourseDto_CourseName_0
2023-06-16 09:00:10.561 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School) in 75.6894ms
2023-06-16 09:00:10.562 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School)'
2023-06-16 09:00:10.737 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admin/courses application/json 112 - 400 - application/json 255.8968ms
2023-06-16 09:00:13.971 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=1 - -
2023-06-16 09:00:13.975 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:00:13.976 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:00:13.976 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:00:13.976 +03:00  INF  Attempt GetAll of Project 
2023-06-16 09:00:13.977 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 09:00:13.982 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 09:00:13.982 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:00:13.983 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 6.7683ms
2023-06-16 09:00:13.983 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:00:13.983 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=1 - - - 200 170 application/json;+charset=utf-8 12.4543ms
2023-06-16 09:00:44.298 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admin/courses application/json 116
2023-06-16 09:00:44.301 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:00:44.306 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School)'
2023-06-16 09:00:44.307 +03:00  INF  Route matched with {action = "CreateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCourse(Cooking_School.Services.Dtos.CookClassDto.CreateCourseDto) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:00:44.307 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:00:44.311 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__createCourseDto_CourseName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[CourseName] = @__createCourseDto_CourseName_0
2023-06-16 09:00:44.321 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Courses] ([CourseLevel], [CourseName], [Created], [Deleted], [Description], [FavoriteN], [Price], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2023-06-16 09:00:44.322 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:00:44.322 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School) in 15.4788ms
2023-06-16 09:00:44.322 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.CreateCourse (Cooking_School)'
2023-06-16 09:00:44.323 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admin/courses application/json 116 - 200 174 application/json;+charset=utf-8 24.5804ms
2023-06-16 09:00:53.195 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses/4 - -
2023-06-16 09:00:53.197 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:00:53.198 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School)'
2023-06-16 09:00:53.200 +03:00  INF  Route matched with {action = "GetCourseById", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourseById(Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:00:53.201 +03:00  INF  Attempt GetBy Id of Course
2023-06-16 09:00:53.208 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:00:53.208 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:00:53.209 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School) in 8.3519ms
2023-06-16 09:00:53.209 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School)'
2023-06-16 09:00:53.209 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses/4 - - - 200 175 application/json;+charset=utf-8 14.3102ms
2023-06-16 09:01:07.695 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=8&PageSize=1 - -
2023-06-16 09:01:07.697 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:01:07.698 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:01:07.698 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:01:07.698 +03:00  INF  Attempt GetAll of Project 
2023-06-16 09:01:07.699 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 09:01:07.704 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 09:01:07.704 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:01:07.705 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 7.1065ms
2023-06-16 09:01:07.705 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:01:07.705 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=8&PageSize=1 - - - 200 2 application/json;+charset=utf-8 10.6784ms
2023-06-16 09:01:17.338 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=5 - -
2023-06-16 09:01:17.341 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:01:17.341 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:01:17.341 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:01:17.341 +03:00  INF  Attempt GetAll of Project 
2023-06-16 09:01:17.342 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 09:01:17.345 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 09:01:17.346 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:01:17.346 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 5.2848ms
2023-06-16 09:01:17.346 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:01:17.347 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=5 - - - 200 688 application/json;+charset=utf-8 8.9029ms
2023-06-16 09:02:09.164 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105
2023-06-16 09:02:09.171 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:02:09.175 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:02:09.178 +03:00  INF  Route matched with {action = "UpdateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Cooking_School.Services.Dtos.CookClassDto.UpdateCourseDto, Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:02:09.181 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:02:09.188 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:02:09.215 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CourseLevel] = @p0, [CourseName] = @p1, [Created] = @p2, [Deleted] = @p3, [Description] = @p4, [FavoriteN] = @p5, [Price] = @p6, [Updated] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2023-06-16 09:02:09.216 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:02:09.216 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School) in 38.2202ms
2023-06-16 09:02:09.216 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:02:09.216 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105 - 200 167 application/json;+charset=utf-8 51.9417ms
2023-06-16 09:02:32.817 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses/1 - -
2023-06-16 09:02:32.820 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:02:32.822 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School)'
2023-06-16 09:02:32.822 +03:00  INF  Route matched with {action = "GetCourseById", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourseById(Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:02:32.823 +03:00  INF  Attempt GetBy Id of Course
2023-06-16 09:02:32.826 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:02:32.830 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:02:32.831 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School) in 8.2272ms
2023-06-16 09:02:32.831 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School)'
2023-06-16 09:02:32.831 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses/1 - - - 200 168 application/json;+charset=utf-8 14.4575ms
2023-06-16 09:02:45.766 +03:00  INF  Request starting HTTP/1.1 DELETE https://localhost:44359/api/admin/courses/2 - -
2023-06-16 09:02:45.770 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:02:45.771 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.DeleteCourse (Cooking_School)'
2023-06-16 09:02:45.773 +03:00  INF  Route matched with {action = "DeleteCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCourse(Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:02:45.774 +03:00  INF  Attempt Delete for Project 
2023-06-16 09:02:45.777 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:02:45.792 +03:00  INF  Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Courses]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 09:02:45.793 +03:00  INF  Executing OkObjectResult, writing value of type 'System.String'.
2023-06-16 09:02:45.794 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.DeleteCourse (Cooking_School) in 20.4407ms
2023-06-16 09:02:45.794 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.DeleteCourse (Cooking_School)'
2023-06-16 09:02:45.794 +03:00  INF  Request finished HTTP/1.1 DELETE https://localhost:44359/api/admin/courses/2 - - - 200 - text/plain;+charset=utf-8 27.6283ms
2023-06-16 09:02:49.738 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=5 - -
2023-06-16 09:02:49.740 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:02:49.741 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:02:49.741 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:02:49.741 +03:00  INF  Attempt GetAll of Project 
2023-06-16 09:02:49.743 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 09:02:49.748 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 09:02:49.748 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:02:49.749 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 8.0678ms
2023-06-16 09:02:49.749 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:02:49.750 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=5 - - - 200 518 application/json;+charset=utf-8 11.4845ms
2023-06-16 09:06:02.495 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:06:02.767 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:06:02.768 +03:00  INF  Hosting environment: Development
2023-06-16 09:06:02.768 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:06:02.799 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:06:03.110 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 311.9190ms
2023-06-16 09:06:03.363 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:06:03.370 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 2.5152ms
2023-06-16 09:06:03.460 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:06:03.498 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 37.8961ms
2023-06-16 09:06:04.288 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:06:04.412 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.8214ms
2023-06-16 09:06:17.856 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105
2023-06-16 09:06:18.476 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:06:18.508 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:06:18.508 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:06:18.508 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:06:20.174 +03:00  INF  Executed DbCommand (40ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:06:20.418 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:06:20.436 +03:00  INF  Route matched with {action = "UpdateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Cooking_School.Services.Dtos.CookClassDto.UpdateCourseDto, Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:06:20.590 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:06:20.608 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:06:20.729 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CourseLevel] = @p0, [CourseName] = @p1, [Created] = @p2, [Deleted] = @p3, [Description] = @p4, [FavoriteN] = @p5, [Price] = @p6, [Updated] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2023-06-16 09:06:20.748 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:06:20.778 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School) in 339.0273ms
2023-06-16 09:06:20.779 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:06:20.782 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105 - 200 167 application/json;+charset=utf-8 2925.7850ms
2023-06-16 09:06:45.048 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105
2023-06-16 09:06:45.101 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:06:45.107 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:06:45.107 +03:00  INF  Route matched with {action = "UpdateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Cooking_School.Services.Dtos.CookClassDto.UpdateCourseDto, Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:06:45.108 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:06:45.112 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:06:45.164 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CourseLevel] = @p0, [CourseName] = @p1, [Created] = @p2, [Deleted] = @p3, [Description] = @p4, [FavoriteN] = @p5, [Price] = @p6, [Updated] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2023-06-16 09:06:45.165 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:06:45.166 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School) in 58.999ms
2023-06-16 09:06:45.166 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:06:45.166 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105 - 200 167 application/json;+charset=utf-8 117.8910ms
2023-06-16 09:06:46.730 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105
2023-06-16 09:06:46.744 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:06:46.747 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:06:46.747 +03:00  INF  Route matched with {action = "UpdateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Cooking_School.Services.Dtos.CookClassDto.UpdateCourseDto, Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:06:46.750 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:06:46.753 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:06:46.759 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CourseLevel] = @p0, [CourseName] = @p1, [Created] = @p2, [Deleted] = @p3, [Description] = @p4, [FavoriteN] = @p5, [Price] = @p6, [Updated] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2023-06-16 09:06:46.760 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:06:46.760 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School) in 12.827ms
2023-06-16 09:06:46.760 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:06:46.760 +03:00  INF  Request finished HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105 - 200 167 application/json;+charset=utf-8 30.8640ms
2023-06-16 09:06:50.682 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=5 - -
2023-06-16 09:06:50.684 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:06:50.686 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:06:50.690 +03:00  INF  Route matched with {action = "GetAllCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:06:50.697 +03:00  INF  Attempt GetAll of Project 
2023-06-16 09:06:50.739 +03:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2023-06-16 09:06:50.749 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 09:06:50.749 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 09:06:50.756 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 09:06:50.765 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:06:50.766 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School) in 75.4511ms
2023-06-16 09:06:50.766 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllCourses (Cooking_School)'
2023-06-16 09:06:50.766 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses?PageNumber=1&PageSize=5 - - - 200 518 application/json;+charset=utf-8 84.4145ms
2023-06-16 09:06:58.765 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses/1 - -
2023-06-16 09:06:58.769 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:06:58.770 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School)'
2023-06-16 09:06:58.774 +03:00  INF  Route matched with {action = "GetCourseById", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourseById(Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:06:58.774 +03:00  INF  Attempt GetBy Id of Course
2023-06-16 09:06:58.778 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:06:58.778 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.CourseDto.CourseDTO'.
2023-06-16 09:06:58.779 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School) in 5.578ms
2023-06-16 09:06:58.779 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetCourseById (Cooking_School)'
2023-06-16 09:06:58.779 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses/1 - - - 200 168 application/json;+charset=utf-8 13.9597ms
2023-06-16 09:08:53.926 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:08:54.156 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:08:54.156 +03:00  INF  Hosting environment: Development
2023-06-16 09:08:54.156 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:08:54.180 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:08:54.486 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 305.8645ms
2023-06-16 09:08:54.726 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:08:54.730 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.3231ms
2023-06-16 09:08:54.814 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:08:54.848 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.1928ms
2023-06-16 09:08:55.447 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:08:55.564 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.4641ms
2023-06-16 09:09:02.992 +03:00  INF  Request starting HTTP/1.1 PUT https://localhost:44359/api/admin/courses/1 application/json 105
2023-06-16 09:09:03.475 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:09:03.497 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:09:03.497 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:09:03.498 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:09:04.171 +03:00  INF  Executed DbCommand (37ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:09:04.380 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.UpdateCourse (Cooking_School)'
2023-06-16 09:09:04.397 +03:00  INF  Route matched with {action = "UpdateCourse", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Cooking_School.Services.Dtos.CookClassDto.UpdateCourseDto, Int32) on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:09:04.550 +03:00  INF  Attempt Sinup for courseDto 
2023-06-16 09:09:04.564 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__courseId_0
2023-06-16 09:10:23.828 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:10:24.087 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:10:24.095 +03:00  INF  Hosting environment: Development
2023-06-16 09:10:24.096 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:10:24.124 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:10:24.419 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 297.4317ms
2023-06-16 09:10:24.421 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:10:24.429 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.2808ms
2023-06-16 09:10:24.574 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:10:24.633 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 59.0674ms
2023-06-16 09:10:25.183 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:10:25.370 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.0108ms
2023-06-16 09:11:02.026 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/courses/favorite - -
2023-06-16 09:11:02.568 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:11:02.598 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:11:02.598 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:11:02.598 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:11:03.399 +03:00  INF  Executed DbCommand (46ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:11:03.632 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllFavoriteCourses (Cooking_School)'
2023-06-16 09:11:03.644 +03:00  INF  Route matched with {action = "GetAllFavoriteCourses", controller = "AdminCourse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteCourses() on controller Cooking_School.Controllers.AdminCourseController (Cooking_School).
2023-06-16 09:11:03.739 +03:00  INF  Attempt GetBy Id of Course
2023-06-16 09:11:03.755 +03:00  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[CourseId], [f].[Created], [f].[Deleted], [f].[TraineeId], [f].[Updated]
FROM [Favorite_Courses] AS [f]
2023-06-16 09:11:03.763 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
2023-06-16 09:11:03.781 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CourseDto.CourseDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:11:03.829 +03:00  INF  Executed action Cooking_School.Controllers.AdminCourseController.GetAllFavoriteCourses (Cooking_School) in 181.3351ms
2023-06-16 09:11:03.830 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminCourseController.GetAllFavoriteCourses (Cooking_School)'
2023-06-16 09:11:03.835 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/courses/favorite - - - 200 2 application/json;+charset=utf-8 1809.2968ms
2023-06-16 09:11:08.802 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/trainees?PageNumber=1&PageSize=1 - -
2023-06-16 09:11:08.849 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:11:08.857 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School)'
2023-06-16 09:11:08.867 +03:00  INF  Route matched with {action = "GetAllTrainees", controller = "AdminTrainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainees(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminTraineeController (Cooking_School).
2023-06-16 09:11:08.997 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Trainee' AND [u].[Discriminator] = N'Trainee'
2023-06-16 09:11:09.012 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 09:11:09.012 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 09:11:09.071 +03:00  INF  Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[BirthDate], [t].[Created], [t].[Deleted], [t].[Discriminator], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PasswordHashed], [t].[PasswordSlot], [t].[PhoneNumber], [t].[Updated], [t].[CardN], [t].[ImagePath], [t].[Level], [t0].[Id], [t0].[AdminId], [t0].[ChefId], [t0].[CourseId], [t0].[Created], [t0].[Deleted], [t0].[Total_Mark], [t0].[TraineeId], [t0].[Updated]
FROM (
    SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CardN], [u].[ImagePath], [u].[Level]
    FROM [Users] AS [u]
    WHERE [u].[Discriminator] = N'Trainee' AND [u].[Discriminator] = N'Trainee'
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Trainee_Courses] AS [t0] ON [t].[Id] = [t0].[TraineeId]
ORDER BY [t].[Id]
2023-06-16 09:11:09.082 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.TraineeDto.TraineeDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:11:09.096 +03:00  INF  Executed action Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School) in 228.8898ms
2023-06-16 09:11:09.096 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School)'
2023-06-16 09:11:09.097 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/trainees?PageNumber=1&PageSize=1 - - - 200 408 application/json;+charset=utf-8 294.5849ms
2023-06-16 09:11:17.803 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/trainees?PageNumber=1&PageSize=5 - -
2023-06-16 09:11:17.817 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:11:17.820 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School)'
2023-06-16 09:11:17.820 +03:00  INF  Route matched with {action = "GetAllTrainees", controller = "AdminTrainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainees(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminTraineeController (Cooking_School).
2023-06-16 09:11:17.824 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Trainee' AND [u].[Discriminator] = N'Trainee'
2023-06-16 09:11:17.829 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[BirthDate], [t].[Created], [t].[Deleted], [t].[Discriminator], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PasswordHashed], [t].[PasswordSlot], [t].[PhoneNumber], [t].[Updated], [t].[CardN], [t].[ImagePath], [t].[Level], [t0].[Id], [t0].[AdminId], [t0].[ChefId], [t0].[CourseId], [t0].[Created], [t0].[Deleted], [t0].[Total_Mark], [t0].[TraineeId], [t0].[Updated]
FROM (
    SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CardN], [u].[ImagePath], [u].[Level]
    FROM [Users] AS [u]
    WHERE [u].[Discriminator] = N'Trainee' AND [u].[Discriminator] = N'Trainee'
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Trainee_Courses] AS [t0] ON [t].[Id] = [t0].[TraineeId]
ORDER BY [t].[Id]
2023-06-16 09:11:17.830 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.TraineeDto.TraineeDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:11:17.831 +03:00  INF  Executed action Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School) in 10.9253ms
2023-06-16 09:11:17.831 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School)'
2023-06-16 09:11:17.831 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/trainees?PageNumber=1&PageSize=5 - - - 200 814 application/json;+charset=utf-8 27.8481ms
2023-06-16 09:12:05.189 +03:00  INF  Request starting HTTP/1.1 DELETE https://localhost:44359/api/admin/trainees/5 - -
2023-06-16 09:12:05.197 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:12:05.199 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminTraineeController.DeleteTrainee (Cooking_School)'
2023-06-16 09:12:05.201 +03:00  INF  Route matched with {action = "DeleteTrainee", controller = "AdminTrainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteTrainee(Int32) on controller Cooking_School.Controllers.AdminTraineeController (Cooking_School).
2023-06-16 09:12:05.204 +03:00  INF  Attempt To Delete Trainee
2023-06-16 09:12:05.212 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__traineeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Trainee' AND [u].[Id] = @__traineeId_0
2023-06-16 09:12:06.687 +03:00  INF  Executed action Cooking_School.Controllers.AdminTraineeController.DeleteTrainee (Cooking_School) in 1485.4879ms
2023-06-16 09:12:06.687 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminTraineeController.DeleteTrainee (Cooking_School)'
2023-06-16 09:12:06.845 +03:00  ERR  An unhandled exception has occurred while executing the request.Azure.RequestFailedException: The specified blob does not exist.
RequestId:62385ecd-b01e-0009-6219-a0e9ee000000
Time:2023-06-16T06:12:06.9733055Z
Status: 404 (The specified blob does not exist.)
ErrorCode: BlobNotFound

Content:
<?xml version="1.0" encoding="utf-8"?><Error><Code>BlobNotFound</Code><Message>The specified blob does not exist.
RequestId:62385ecd-b01e-0009-6219-a0e9ee000000
Time:2023-06-16T06:12:06.9733055Z</Message></Error>

Headers:
Server: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: 62385ecd-b01e-0009-6219-a0e9ee000000
x-ms-client-request-id: 28960cf6-7afa-4a57-aafa-7e81d3f2d005
x-ms-version: 2022-11-02
x-ms-error-code: BlobNotFound
Date: Fri, 16 Jun 2023 06:12:06 GMT
Content-Length: 215
Content-Type: application/xml

   at Azure.Storage.Blobs.BlobRestClient.DeleteAsync(String snapshot, String versionId, Nullable`1 timeout, String leaseId, Nullable`1 deleteSnapshots, Nullable`1 ifModifiedSince, Nullable`1 ifUnmodifiedSince, String ifMatch, String ifNoneMatch, String ifTags, Nullable`1 blobDeleteType, CancellationToken cancellationToken)
   at Azure.Storage.Blobs.Specialized.BlobBaseClient.DeleteInternal(DeleteSnapshotsOption snapshotsOption, BlobRequestConditions conditions, Boolean async, CancellationToken cancellationToken, String operationName)
   at Azure.Storage.Blobs.Specialized.BlobBaseClient.DeleteAsync(DeleteSnapshotsOption snapshotsOption, BlobRequestConditions conditions, CancellationToken cancellationToken)
   at Cooking_School.Services.FilesService.FileService.DeleteBlob(String blobFileName) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\FilesService\FileService.cs:line 106
   at Cooking_School.Services.TraineeService.TraineeService.DeleteUser(Int32 traineeId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\TraineeService\TraineeService.cs:line 75
   at Cooking_School.Controllers.AdminTraineeController.DeleteTrainee(Int32 traineeId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\AdminTraineeController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 09:12:06.904 +03:00  INF  Request finished HTTP/1.1 DELETE https://localhost:44359/api/admin/trainees/5 - - - 500 - text/plain;+charset=utf-8 1714.4704ms
2023-06-16 09:14:35.362 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:14:35.574 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:14:35.574 +03:00  INF  Hosting environment: Development
2023-06-16 09:14:35.574 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:14:35.600 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:14:35.920 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:14:35.923 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 323.9429ms
2023-06-16 09:14:35.925 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.7925ms
2023-06-16 09:14:36.063 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:14:36.131 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.2667ms
2023-06-16 09:14:36.533 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:14:36.663 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.9459ms
2023-06-16 09:14:47.171 +03:00  INF  Request starting HTTP/1.1 DELETE https://localhost:44359/api/admin/trainees/5 - -
2023-06-16 09:14:47.760 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:14:47.786 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:14:47.787 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:14:47.787 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:14:49.046 +03:00  INF  Executed DbCommand (51ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:14:49.277 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminTraineeController.DeleteTrainee (Cooking_School)'
2023-06-16 09:14:49.292 +03:00  INF  Route matched with {action = "DeleteTrainee", controller = "AdminTrainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteTrainee(Int32) on controller Cooking_School.Controllers.AdminTraineeController (Cooking_School).
2023-06-16 09:14:49.448 +03:00  INF  Attempt To Delete Trainee
2023-06-16 09:14:49.466 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__traineeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Trainee' AND [u].[Id] = @__traineeId_0
2023-06-16 09:14:50.901 +03:00  INF  Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 09:14:50.914 +03:00  INF  Executing OkObjectResult, writing value of type 'System.String'.
2023-06-16 09:14:50.919 +03:00  INF  Executed action Cooking_School.Controllers.AdminTraineeController.DeleteTrainee (Cooking_School) in 1623.0602ms
2023-06-16 09:14:50.921 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminTraineeController.DeleteTrainee (Cooking_School)'
2023-06-16 09:14:50.925 +03:00  INF  Request finished HTTP/1.1 DELETE https://localhost:44359/api/admin/trainees/5 - - - 200 - text/plain;+charset=utf-8 3754.7057ms
2023-06-16 09:14:55.915 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/trainees?PageNumber=1&PageSize=5 - -
2023-06-16 09:14:55.958 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:14:55.963 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School)'
2023-06-16 09:14:55.968 +03:00  INF  Route matched with {action = "GetAllTrainees", controller = "AdminTrainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainees(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminTraineeController (Cooking_School).
2023-06-16 09:14:56.028 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Trainee' AND [u].[Discriminator] = N'Trainee'
2023-06-16 09:14:56.043 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 09:14:56.044 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 09:14:56.094 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[BirthDate], [t].[Created], [t].[Deleted], [t].[Discriminator], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PasswordHashed], [t].[PasswordSlot], [t].[PhoneNumber], [t].[Updated], [t].[CardN], [t].[ImagePath], [t].[Level], [t0].[Id], [t0].[AdminId], [t0].[ChefId], [t0].[CourseId], [t0].[Created], [t0].[Deleted], [t0].[Total_Mark], [t0].[TraineeId], [t0].[Updated]
FROM (
    SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CardN], [u].[ImagePath], [u].[Level]
    FROM [Users] AS [u]
    WHERE [u].[Discriminator] = N'Trainee' AND [u].[Discriminator] = N'Trainee'
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Trainee_Courses] AS [t0] ON [t].[Id] = [t0].[TraineeId]
ORDER BY [t].[Id]
2023-06-16 09:14:56.110 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.TraineeDto.TraineeDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:14:56.165 +03:00  INF  Executed action Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School) in 196.9145ms
2023-06-16 09:14:56.165 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminTraineeController.GetAllTrainees (Cooking_School)'
2023-06-16 09:14:56.165 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/trainees?PageNumber=1&PageSize=5 - - - 200 407 application/json;+charset=utf-8 249.5876ms
2023-06-16 09:15:49.095 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - -
2023-06-16 09:15:49.113 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:15:49.122 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 09:15:49.124 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 09:15:49.126 +03:00  INF  Attempt To GetAll Application
2023-06-16 09:15:49.139 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 09:15:49.156 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
FROM [CookClasses] AS [c]
WHERE [c].[Id] = @__cheefId_0
2023-06-16 09:15:49.162 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:15:49.163 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 38.8557ms
2023-06-16 09:15:49.163 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 09:15:49.164 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - - - 200 2 application/json;+charset=utf-8 68.4145ms
2023-06-16 09:15:56.541 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes/2/applications - -
2023-06-16 09:15:56.544 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:15:56.545 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School)'
2023-06-16 09:15:56.547 +03:00  INF  Route matched with {action = "GetAllApplicationToClass", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationToClass(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 09:15:56.548 +03:00  INF  Attempt To Accept Application Application
2023-06-16 09:15:56.563 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AdminId], [t].[ChefId], [t].[CourseId], [t].[Created], [t].[Deleted], [t].[EndingAt], [t].[StartingAt], [t].[TraineeId], [t].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
    FROM [CookClasses] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN [Applications] AS [a] ON [t].[Id] = [a].[CookClassId]
ORDER BY [t].[Id]
2023-06-16 09:17:50.404 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:17:50.623 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:17:50.624 +03:00  INF  Hosting environment: Development
2023-06-16 09:17:50.624 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:17:50.651 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:17:50.964 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:17:50.965 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 314.8144ms
2023-06-16 09:17:50.969 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.4721ms
2023-06-16 09:17:51.163 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:17:51.249 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 85.9998ms
2023-06-16 09:17:51.582 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:17:51.730 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 147.7826ms
2023-06-16 09:18:35.526 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes/2/applications - -
2023-06-16 09:18:36.073 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:18:36.094 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:18:36.095 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:18:36.095 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:18:36.842 +03:00  INF  Executed DbCommand (37ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:18:37.047 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School)'
2023-06-16 09:18:37.061 +03:00  INF  Route matched with {action = "GetAllApplicationToClass", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationToClass(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 09:18:37.189 +03:00  INF  Attempt To Accept Application Application
2023-06-16 09:18:37.273 +03:00  INF  Executed DbCommand (9ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AdminId], [t].[ChefId], [t].[CourseId], [t].[Created], [t].[Deleted], [t].[EndingAt], [t].[StartingAt], [t].[TraineeId], [t].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
    FROM [CookClasses] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN [Applications] AS [a] ON [t].[Id] = [a].[CookClassId]
ORDER BY [t].[Id]
2023-06-16 09:20:12.212 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:20:12.532 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:20:12.533 +03:00  INF  Hosting environment: Development
2023-06-16 09:20:12.533 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:20:12.562 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:20:12.903 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 341.4933ms
2023-06-16 09:20:12.945 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:20:12.950 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.7100ms
2023-06-16 09:20:13.058 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:20:13.125 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.2194ms
2023-06-16 09:20:13.703 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:20:13.859 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 155.9209ms
2023-06-16 09:20:21.407 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes/2/applications - -
2023-06-16 09:20:21.914 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:20:21.951 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:20:21.951 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:20:21.951 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:20:22.696 +03:00  INF  Executed DbCommand (38ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:20:22.921 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School)'
2023-06-16 09:20:22.935 +03:00  INF  Route matched with {action = "GetAllApplicationToClass", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationToClass(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 09:20:23.045 +03:00  INF  Attempt To Accept Application Application
2023-06-16 09:20:23.109 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AdminId], [t].[ChefId], [t].[CourseId], [t].[Created], [t].[Deleted], [t].[EndingAt], [t].[StartingAt], [t].[TraineeId], [t].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
    FROM [CookClasses] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN [Applications] AS [a] ON [t].[Id] = [a].[CookClassId]
ORDER BY [t].[Id]
2023-06-16 09:20:23.157 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School) in 217.8874ms
2023-06-16 09:20:23.159 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School)'
2023-06-16 09:20:23.338 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes/2/applications - - - 400 - application/json 1931.4886ms
2023-06-16 09:21:07.499 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 09:21:07.517 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 6:21:07 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 09:21:07.545 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 6:21:07 AM'.
2023-06-16 09:21:07.545 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 09:21:07.548 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 09:21:07.620 +03:00  INF  Login Attempt for chefDto 
2023-06-16 09:21:07.665 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 09:21:07.780 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 09:21:07.805 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 09:21:07.887 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 09:21:07.943 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 09:21:07.965 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 09:21:07.978 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 429.5088ms
2023-06-16 09:21:07.978 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 09:21:07.978 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 751 application/json;+charset=utf-8 479.4874ms
2023-06-16 09:21:12.267 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/logout - 0
2023-06-16 09:21:12.286 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:21:12.293 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogOut (Cooking_School)'
2023-06-16 09:21:12.296 +03:00  INF  Route matched with {action = "LogOut", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogOut() on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 09:21:12.299 +03:00  INF  Attempt to logout 
2023-06-16 09:21:12.310 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:21:12.327 +03:00  INF  Executing OkObjectResult, writing value of type 'System.String'.
2023-06-16 09:21:12.328 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogOut (Cooking_School) in 31.6869ms
2023-06-16 09:21:12.328 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogOut (Cooking_School)'
2023-06-16 09:21:12.328 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/logout - 0 - 200 - text/plain;+charset=utf-8 61.5067ms
2023-06-16 09:21:15.665 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/refresh-token - 0
2023-06-16 09:21:15.668 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:21:15.673 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 6:21:15 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 09:21:15.673 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 6:21:15 AM'.
2023-06-16 09:21:15.677 +03:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-16 09:21:15.681 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 09:21:15.682 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/refresh-token - 0 - 401 - - 16.4338ms
2023-06-16 09:21:50.148 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0
2023-06-16 09:21:50.178 +03:00  INF  Executed DbCommand (26ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:21:50.184 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 6:21:50 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 09:21:50.184 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 6:21:50 AM'.
2023-06-16 09:21:50.184 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 09:21:50.184 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 09:21:50.185 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0 - 401 - - 36.6480ms
2023-06-16 09:22:49.852 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0
2023-06-16 09:22:49.860 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:22:49.864 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 09:22:49.866 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 09:22:49.866 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0 - 403 - - 15.4405ms
2023-06-16 09:22:51.190 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0
2023-06-16 09:22:51.193 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:22:51.194 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 09:22:51.194 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 09:22:51.195 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0 - 403 - - 4.6605ms
2023-06-16 09:23:03.398 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0
2023-06-16 09:23:03.400 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:23:03.401 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 09:23:03.401 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 09:23:03.402 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0 - 403 - - 4.1972ms
2023-06-16 09:23:05.616 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0
2023-06-16 09:23:05.618 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:23:05.621 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 09:23:05.621 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 09:23:05.621 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0 - 403 - - 5.8768ms
2023-06-16 09:24:23.073 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:24:23.326 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:24:23.332 +03:00  INF  Hosting environment: Development
2023-06-16 09:24:23.332 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:24:23.363 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:24:23.858 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 494.8882ms
2023-06-16 09:24:23.955 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:24:23.963 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 8.1595ms
2023-06-16 09:24:24.188 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:24:24.242 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.4991ms
2023-06-16 09:24:24.654 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:24:24.816 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.6154ms
2023-06-16 09:24:49.180 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0
2023-06-16 09:24:49.691 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:24:49.721 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:24:49.722 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:24:49.722 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:24:51.269 +03:00  INF  Executed DbCommand (46ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:24:51.489 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 09:24:51.491 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 09:24:51.495 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/2/fovarite - 0 - 403 - - 2315.1541ms
2023-06-16 09:26:35.868 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 09:26:36.133 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 09:26:36.133 +03:00  INF  Hosting environment: Development
2023-06-16 09:26:36.133 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 09:26:36.160 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 09:26:36.531 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 372.2638ms
2023-06-16 09:26:36.837 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 09:26:36.844 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 5.4543ms
2023-06-16 09:26:37.011 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 09:26:37.088 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 76.4339ms
2023-06-16 09:26:37.445 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 09:26:37.594 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 149.5383ms
2023-06-16 09:26:46.167 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/api/admins/favorite-meals - -
2023-06-16 09:26:46.247 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2023-06-16 09:26:46.249 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 09:26:46.250 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/api/admins/favorite-meals - - - 401 - - 83.6271ms
2023-06-16 09:26:56.323 +03:00  INF  Request starting HTTP/2 POST https://localhost:44359/api/admins/login application/json-patch+json 35
2023-06-16 09:26:56.341 +03:00  INF  CORS policy execution successful.
2023-06-16 09:26:56.347 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 09:26:56.371 +03:00  INF  Route matched with {action = "Login", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 09:26:56.541 +03:00  INF  Login Attempt for adminLoginDto 
2023-06-16 09:26:57.135 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 09:26:57.160 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:26:57.161 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:26:57.161 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 09:26:57.895 +03:00  INF  Executed DbCommand (47ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 09:26:58.022 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 09:26:58.124 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 09:26:58.197 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 09:26:58.235 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 09:26:58.249 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 09:26:58.272 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.Login (Cooking_School) in 1895.6661ms
2023-06-16 09:26:58.272 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 09:26:58.277 +03:00  INF  Request finished HTTP/2 POST https://localhost:44359/api/admins/login application/json-patch+json 35 - 202 751 application/json;+charset=utf-8 1953.9821ms
2023-06-16 09:27:22.712 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/api/admins/favorite-meals - -
2023-06-16 09:27:22.779 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:27:22.811 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 09:27:22.814 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 09:27:22.822 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 09:28:32.029 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 09:28:32.034 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 09:28:32.035 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Core.ModelUsed.Meal, Cooking_School.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:28:32.036 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 69222.7914ms
2023-06-16 09:28:32.036 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 09:28:32.038 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/api/admins/favorite-meals - - - 200 2 application/json;+charset=utf-8 69324.6575ms
2023-06-16 09:29:22.084 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0
2023-06-16 09:29:22.101 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:29:22.120 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 6:29:22 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 09:29:22.137 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 6:29:22 AM'.
2023-06-16 09:29:22.138 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Trainee)
2023-06-16 09:29:22.140 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 09:29:22.140 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0 - 401 - - 56.8237ms
2023-06-16 09:29:27.365 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 09:29:27.367 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 6:29:27 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 09:29:27.367 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 6:29:27 AM'.
2023-06-16 09:29:27.367 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 09:29:27.372 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 09:29:27.405 +03:00  INF  Login Attempt for chefDto 
2023-06-16 09:29:27.409 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 09:29:27.411 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 09:29:27.414 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 09:29:27.418 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 09:29:27.424 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 09:29:27.425 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 09:29:27.425 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 53.2576ms
2023-06-16 09:29:27.425 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 09:29:27.425 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 751 application/json;+charset=utf-8 60.1117ms
2023-06-16 09:29:52.622 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 09:29:52.625 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 6:29:52 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 09:29:52.625 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 6:29:52 AM'.
2023-06-16 09:29:52.626 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 09:29:52.626 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 09:29:52.627 +03:00  INF  Login Attempt for chefDto 
2023-06-16 09:29:52.633 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 09:29:52.673 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 09:29:52.700 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 09:29:52.708 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 09:29:52.711 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 09:29:52.711 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 09:29:52.712 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 85.734ms
2023-06-16 09:29:52.712 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 09:29:52.712 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 89.5716ms
2023-06-16 09:30:10.266 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/52944/fovarite - 0
2023-06-16 09:30:10.271 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:30:10.272 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.AddMealToFovariteChef (Cooking_School)'
2023-06-16 09:30:10.276 +03:00  INF  Route matched with {action = "AddMealToFovariteChef", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMealToFovariteChef(Int32) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 09:30:10.287 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 09:30:10.313 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FavoriteMeal_chefs] ([ChefId], [Created], [Deleted], [MealId], [Updated], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2023-06-16 09:30:10.315 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 09:30:10.316 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.AddMealToFovariteChef (Cooking_School) in 39.8517ms
2023-06-16 09:30:10.316 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.AddMealToFovariteChef (Cooking_School)'
2023-06-16 09:30:10.316 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/52944/fovarite - 0 - 204 - - 50.0844ms
2023-06-16 09:30:18.768 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/52944/fovarite - 0
2023-06-16 09:30:18.773 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:30:18.774 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.AddMealToFovariteChef (Cooking_School)'
2023-06-16 09:30:18.774 +03:00  INF  Route matched with {action = "AddMealToFovariteChef", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMealToFovariteChef(Int32) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 09:30:18.778 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 09:30:18.783 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FavoriteMeal_chefs] ([ChefId], [Created], [Deleted], [MealId], [Updated], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2023-06-16 09:30:18.784 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 09:30:18.784 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.AddMealToFovariteChef (Cooking_School) in 9.3508ms
2023-06-16 09:30:18.784 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.AddMealToFovariteChef (Cooking_School)'
2023-06-16 09:30:18.784 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/1/meals/52944/fovarite - 0 - 204 - - 15.8283ms
2023-06-16 09:30:26.278 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 09:30:26.281 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 09:30:26.281 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 09:30:26.281 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 09:30:26.282 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 09:30:32.140 +03:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 09:30:32.142 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 09:30:32.143 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Core.ModelUsed.Meal, Cooking_School.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 09:30:32.145 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 5863.7518ms
2023-06-16 09:30:32.145 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 09:30:32.146 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 200 243 application/json;+charset=utf-8 5867.6950ms
2023-06-16 10:00:33.299 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:00:33.701 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:00:33.702 +03:00  INF  Hosting environment: Development
2023-06-16 10:00:33.702 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:00:33.752 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:00:34.127 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:00:34.130 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 378.8969ms
2023-06-16 10:00:34.135 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.5961ms
2023-06-16 10:00:35.744 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:00:35.948 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 202.5171ms
2023-06-16 10:00:36.051 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:00:36.257 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.8578ms
2023-06-16 10:00:47.354 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:00:47.951 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:00:47.976 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:00:47.977 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:00:47.977 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:00:49.666 +03:00  INF  Executed DbCommand (46ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:00:49.918 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:41:07 AM', Current time: '6/16/2023 7:00:49 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:00:49.943 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:41:07 AM', Current time: '6/16/2023 7:00:49 AM'.
2023-06-16 10:00:49.949 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2023-06-16 10:00:49.952 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 10:00:49.957 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 401 - - 2604.0431ms
2023-06-16 10:00:57.135 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38
2023-06-16 10:00:57.144 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:00:57 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:00:57.144 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:00:57 AM'.
2023-06-16 10:00:57.145 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 10:00:57.162 +03:00  INF  Route matched with {action = "Login", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:00:57.376 +03:00  INF  Login Attempt for adminLoginDto 
2023-06-16 10:00:57.444 +03:00  INF  Executed DbCommand (14ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:00:57.581 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:00:57.616 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:00:57.728 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 10:00:57.784 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:00:57.808 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:00:57.845 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.Login (Cooking_School) in 678.3994ms
2023-06-16 10:00:57.846 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 10:00:57.848 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38 - 202 753 application/json;+charset=utf-8 712.6486ms
2023-06-16 10:01:14.622 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:01:14.636 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:01:14.646 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:01:14.648 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:01:14.650 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:01:15.199 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:01:15.207 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:01:15.304 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 655.5952ms
2023-06-16 10:01:15.305 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:01:15.446 +03:00  ERR  An unhandled exception has occurred while executing the request.System.Collections.Generic.KeyNotFoundException: The given key 'Cooking_School.Core.ModelUsed.Meal' was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Cooking_School.Services.AdminService.AdminService.GetAllFavoriteMeals(IList`1 meals) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\AdminService\AdminService.cs:line 43
   at Cooking_School.Controllers.AdminController.GetAllFavoriteMeals() in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\AdminController.cs:line 134
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 10:01:15.474 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 500 - text/plain;+charset=utf-8 851.9574ms
2023-06-16 10:01:51.440 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:01:51.470 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:01:51.475 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:01:51.475 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:01:51.477 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:01:58.973 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:01:58.975 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:02:12.486 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 21010.7968ms
2023-06-16 10:02:12.487 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:02:12.578 +03:00  ERR  An unhandled exception has occurred while executing the request.System.Collections.Generic.KeyNotFoundException: The given key 'Cooking_School.Core.ModelUsed.Meal' was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Cooking_School.Services.AdminService.AdminService.GetAllFavoriteMeals(IList`1 meals) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\AdminService\AdminService.cs:line 43
   at Cooking_School.Controllers.AdminController.GetAllFavoriteMeals() in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\AdminController.cs:line 134
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 10:02:12.580 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 500 - text/plain;+charset=utf-8 21139.9866ms
2023-06-16 10:05:15.972 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:05:16.211 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:05:16.216 +03:00  INF  Hosting environment: Development
2023-06-16 10:05:16.216 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:05:16.242 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:05:16.606 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:05:16.608 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 366.0840ms
2023-06-16 10:05:16.617 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.2334ms
2023-06-16 10:05:16.806 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:05:16.884 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.1705ms
2023-06-16 10:05:17.288 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:05:17.467 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 179.0632ms
2023-06-16 10:05:37.659 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:05:38.336 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:05:38.376 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:05:38.376 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:05:38.377 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:05:39.337 +03:00  INF  Executed DbCommand (49ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:05:39.637 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:05:39.650 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:05:39.780 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:05:46.052 +03:00  INF  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:05:46.063 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:06:11.552 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.ResponsDto`1[[Cooking_School.Services.Dtos.AdminDto.FavoriteMealDto, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:06:11.580 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 31927.1708ms
2023-06-16 10:06:11.581 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:06:11.584 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 200 227 application/json;+charset=utf-8 33924.6052ms
2023-06-16 10:11:00.298 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:11:00.543 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:11:00.548 +03:00  INF  Hosting environment: Development
2023-06-16 10:11:00.548 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:11:00.577 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:11:00.905 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:11:00.906 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 330.0154ms
2023-06-16 10:11:00.909 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.1691ms
2023-06-16 10:11:01.029 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:11:01.102 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 72.8620ms
2023-06-16 10:11:01.505 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:11:01.690 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 185.0191ms
2023-06-16 10:11:47.138 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0
2023-06-16 10:11:47.699 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:11:47.739 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:11:47.739 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:11:47.739 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:11:49.068 +03:00  INF  Executed DbCommand (46ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:11:49.300 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 7:11:49 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:11:49.327 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:09:23 AM', Current time: '6/16/2023 7:11:49 AM'.
2023-06-16 10:11:49.334 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Trainee)
2023-06-16 10:11:49.339 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 10:11:49.344 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0 - 401 - - 2206.1914ms
2023-06-16 10:12:54.200 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38
2023-06-16 10:12:54.216 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:12:54 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:12:54.216 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:12:54 AM'.
2023-06-16 10:12:54.218 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 10:12:54.239 +03:00  INF  Route matched with {action = "LogIn", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 10:12:54.561 +03:00  INF  Login Attempt for traineeDto 
2023-06-16 10:12:54.638 +03:00  INF  Executed DbCommand (11ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:12:54.781 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:12:54.818 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:12:54.961 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:12:54.995 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:12:55.027 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.LogIn (Cooking_School) in 784.37ms
2023-06-16 10:12:55.028 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 10:12:55.029 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38 - 202 731 application/json;+charset=utf-8 829.2212ms
2023-06-16 10:13:18.790 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0
2023-06-16 10:13:18.831 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:13:18.848 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:13:18.853 +03:00  INF  Route matched with {action = "AddMealToFovariteTrainee", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMealToFovariteTrainee(Int32) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 10:13:18.873 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:13:18.882 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__idMeal_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
WHERE [f].[Id] = @__idMeal_0
2023-06-16 10:13:18.882 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:13:18.882 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School) in 29.0174ms
2023-06-16 10:13:18.882 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:13:18.883 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0 - 204 - - 93.2726ms
2023-06-16 10:13:30.004 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:13:30.007 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:13:30.010 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:13:30.013 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:13:30.017 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:13:35.768 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:13:35.774 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:13:41.683 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.ResponsDto`1[[Cooking_School.Services.Dtos.AdminDto.FavoriteMealDto, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:13:41.691 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 11678.4631ms
2023-06-16 10:13:41.691 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:13:41.692 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 200 227 application/json;+charset=utf-8 11687.4355ms
2023-06-16 10:13:49.327 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:13:49.330 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:13:49.331 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:13:49.331 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:13:49.332 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:14:06.104 +03:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:14:09.009 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:15:12.955 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:15:13.177 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:15:13.178 +03:00  INF  Hosting environment: Development
2023-06-16 10:15:13.178 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:15:13.208 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:15:13.584 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:15:13.585 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 378.8103ms
2023-06-16 10:15:13.597 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.9231ms
2023-06-16 10:15:13.862 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:15:13.945 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 82.6228ms
2023-06-16 10:15:14.400 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:15:14.562 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.3137ms
2023-06-16 10:15:27.745 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38
2023-06-16 10:15:27.951 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:15:27 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:15:27.981 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:15:27 AM'.
2023-06-16 10:15:27.984 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 10:15:28.005 +03:00  INF  Route matched with {action = "LogIn", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 10:15:28.212 +03:00  INF  Login Attempt for traineeDto 
2023-06-16 10:15:28.811 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:15:28.838 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:15:28.838 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:15:28.839 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:15:29.738 +03:00  INF  Executed DbCommand (58ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:15:29.909 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:15:29.947 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:15:30.065 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 10:15:30.105 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:15:30.118 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:15:30.147 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.LogIn (Cooking_School) in 2139.2153ms
2023-06-16 10:15:30.148 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 10:15:30.154 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38 - 202 731 application/json;+charset=utf-8 2408.1416ms
2023-06-16 10:15:44.234 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0
2023-06-16 10:15:44.301 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:15:44.324 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:15:44.328 +03:00  INF  Route matched with {action = "AddMealToFovariteTrainee", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMealToFovariteTrainee(Int32) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 10:15:44.345 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:17:28.098 +03:00  INF  Executed DbCommand (94,862ms) [Parameters=[@__idMeal_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
WHERE [f].[Id] = @__idMeal_0
2023-06-16 10:17:28.103 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:17:28.104 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School) in 103775.1813ms
2023-06-16 10:17:28.104 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:17:28.105 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0 - 204 - - 103871.2552ms
2023-06-16 10:17:37.603 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:17:37.620 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:17:37.625 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:17:37.629 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:17:37.633 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:17:41.629 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:17:41.634 +03:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:19:55.174 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:19:55.438 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:19:55.444 +03:00  INF  Hosting environment: Development
2023-06-16 10:19:55.444 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:19:55.470 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:19:55.821 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 351.7198ms
2023-06-16 10:19:55.915 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:19:55.924 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 7.6683ms
2023-06-16 10:19:56.052 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:19:56.236 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 184.4740ms
2023-06-16 10:19:56.636 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:19:56.825 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 189.4761ms
2023-06-16 10:20:08.419 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0
2023-06-16 10:20:09.026 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:20:09.061 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:20:09.061 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:20:09.061 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:20:09.846 +03:00  INF  Executed DbCommand (53ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:20:10.121 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:20:10.144 +03:00  INF  Route matched with {action = "AddMealToFovariteTrainee", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMealToFovariteTrainee(Int32) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 10:20:10.338 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:20:13.003 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__idMeal_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
WHERE [f].[MealId] = @__idMeal_0
2023-06-16 10:20:13.007 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:20:13.011 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School) in 2864.3571ms
2023-06-16 10:20:13.011 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:20:13.015 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0 - 204 - - 4596.2518ms
2023-06-16 10:20:18.764 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244
2023-06-16 10:20:18.801 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:20:18.807 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:20:18.810 +03:00  INF  Route matched with {action = "GetAllFavoriteMeals", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFavoriteMeals() on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:20:18.812 +03:00  INF  Attempt GetAllFavoriteMeals of Meal
2023-06-16 10:20:32.522 +03:00  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[Updated], [f].[UserId]
FROM [FavoriteMeal_chefs] AS [f]
2023-06-16 10:20:32.527 +03:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[AdminId], [f].[ChefId], [f].[Created], [f].[Deleted], [f].[MealId], [f].[TraineeId], [f].[Updated]
FROM [FavoriteMeal_Trainees] AS [f]
2023-06-16 10:20:32.531 +03:00  INF  Executing OkObjectResult, writing value of type 'Cooking_School.Services.Dtos.ResponsDto`1[[Cooking_School.Services.Dtos.AdminDto.FavoriteMealDto, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:20:32.555 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School) in 13744.7566ms
2023-06-16 10:20:32.555 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.GetAllFavoriteMeals (Cooking_School)'
2023-06-16 10:20:32.555 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admins/favorite-meals application/json 244 - 200 227 application/json;+charset=utf-8 13791.1465ms
2023-06-16 10:20:45.946 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/1/meals/52819/fovarite - 0
2023-06-16 10:20:45.960 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:20:45.966 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.AddMealToFovariteTrainee (Cooking_School)'
2023-06-16 10:20:45.966 +03:00  INF  Route matched with {action = "AddMealToFovariteTrainee", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMealToFovariteTrainee(Int32) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 10:20:45.972 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:39:05.818 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:39:06.127 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:39:06.128 +03:00  INF  Hosting environment: Development
2023-06-16 10:39:06.128 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:39:06.180 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:39:06.609 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:39:06.611 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 433.7551ms
2023-06-16 10:39:06.615 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.2393ms
2023-06-16 10:39:06.765 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:39:06.849 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 83.4465ms
2023-06-16 10:39:07.730 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:39:07.904 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 214.7291ms
2023-06-16 10:39:33.018 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=1 - -
2023-06-16 10:39:33.748 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:39:33.774 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:39:33.774 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:39:33.774 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:39:34.764 +03:00  INF  Executed DbCommand (44ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:39:35.009 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 7:20:57 AM', Current time: '6/16/2023 7:39:34 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:39:35.039 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 7:20:57 AM', Current time: '6/16/2023 7:39:34 AM'.
2023-06-16 10:39:35.048 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 10:39:35.057 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 10:39:35.061 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=1 - - - 401 - - 2042.3849ms
2023-06-16 10:40:21.640 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=1 - -
2023-06-16 10:40:21.694 +03:00  INF  Executed DbCommand (10ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:40:21.699 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 7:20:57 AM', Current time: '6/16/2023 7:40:21 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:40:21.700 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 7:20:57 AM', Current time: '6/16/2023 7:40:21 AM'.
2023-06-16 10:40:21.701 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 10:40:21.701 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 10:40:21.702 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=1 - - - 401 - - 62.3385ms
2023-06-16 10:40:27.772 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38
2023-06-16 10:40:27.774 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:40:27 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:40:27.775 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 7:40:27 AM'.
2023-06-16 10:40:27.776 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 10:40:27.796 +03:00  INF  Route matched with {action = "Login", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.AdminController (Cooking_School).
2023-06-16 10:40:28.005 +03:00  INF  Login Attempt for adminLoginDto 
2023-06-16 10:40:28.029 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:40:28.169 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:40:28.209 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:40:28.331 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 10:40:28.384 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:40:28.405 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:40:28.429 +03:00  INF  Executed action Cooking_School.Controllers.AdminController.Login (Cooking_School) in 629.7134ms
2023-06-16 10:40:28.430 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminController.Login (Cooking_School)'
2023-06-16 10:40:28.430 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/admins/login application/json 38 - 202 753 application/json;+charset=utf-8 658.9620ms
2023-06-16 10:40:47.721 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=1 - -
2023-06-16 10:40:47.764 +03:00  INF  Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:40:47.776 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 10:40:47.777 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 10:40:47.778 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=1 - - - 403 - - 56.6224ms
2023-06-16 10:40:57.423 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 10:40:57.425 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 7:40:57 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:40:57.426 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 7:40:57 AM'.
2023-06-16 10:40:57.426 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 10:40:57.430 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 10:40:57.522 +03:00  INF  Login Attempt for chefDto 
2023-06-16 10:40:57.527 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:40:57.545 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:40:57.548 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:40:57.558 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 10:40:57.563 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:40:57.564 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:40:57.565 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 134.6799ms
2023-06-16 10:40:57.565 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 10:40:57.565 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 141.7929ms
2023-06-16 10:41:43.124 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:41:43.129 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:41:43.135 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:41:43.142 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:41:43.166 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:41:43.242 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:41:43.266 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CookClassDto.CookClassDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:41:43.275 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School) in 133.027ms
2023-06-16 10:41:43.275 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:41:43.275 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 200 2 application/json;+charset=utf-8 151.4530ms
2023-06-16 10:41:53.046 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 174
2023-06-16 10:41:53.049 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:41:53.050 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:41:53.054 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:41:53.075 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-06-16 10:41:53.093 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 38.4163ms
2023-06-16 10:41:53.093 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:41:53.093 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 174 - 400 1473 application/problem+json;+charset=utf-8 46.7642ms
2023-06-16 10:43:46.866 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 10:43:46.876 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:43:46.880 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:43:46.880 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:43:46.893 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:43:46.894 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 10:43:46.903 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 10:43:46.926 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__chefId_0
2023-06-16 10:43:46.975 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CookClasses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [EndingAt], [StartingAt], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2023-06-16 10:43:47.000 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ClassDays] ([CookClassId], [Created], [Day], [Deleted], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-16 10:43:47.002 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:43:47.002 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 121.5019ms
2023-06-16 10:43:47.002 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:43:47.003 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 204 - - 136.8091ms
2023-06-16 10:43:59.991 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:43:59.994 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:43:59.995 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:43:59.995 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:43:59.999 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:44:00.002 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:44:00.003 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CookClassDto.CookClassDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:44:00.004 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School) in 8.8447ms
2023-06-16 10:44:00.004 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:44:00.005 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 200 2 application/json;+charset=utf-8 14.0555ms
2023-06-16 10:44:01.548 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:44:01.550 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:44:01.551 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:44:01.551 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:44:01.554 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:44:01.556 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:44:01.556 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CookClassDto.CookClassDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:44:01.557 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School) in 5.8139ms
2023-06-16 10:44:01.557 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:44:01.557 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 200 2 application/json;+charset=utf-8 9.1567ms
2023-06-16 10:44:16.515 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 10:44:16.518 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:44:16.519 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:44:16.519 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:44:16.524 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:44:16.524 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 10:44:16.527 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 10:44:16.529 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__chefId_0
2023-06-16 10:44:16.532 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CookClasses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [EndingAt], [StartingAt], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2023-06-16 10:44:16.535 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ClassDays] ([CookClassId], [Created], [Day], [Deleted], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-16 10:44:16.535 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:44:16.535 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 16.0274ms
2023-06-16 10:44:16.535 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:44:16.535 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 204 - - 20.4923ms
2023-06-16 10:44:33.489 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:44:33.492 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:44:33.492 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:44:33.493 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:44:33.495 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:44:33.497 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:44:33.497 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CookClassDto.CookClassDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:44:33.497 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School) in 4.8988ms
2023-06-16 10:44:33.497 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:44:33.498 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 200 2 application/json;+charset=utf-8 8.6896ms
2023-06-16 10:45:26.917 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 10:45:26.924 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:45:26.928 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:45:26.928 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:45:26.932 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:45:26.932 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 10:45:26.934 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 10:45:26.936 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__chefId_0
2023-06-16 10:45:26.941 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CookClasses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [EndingAt], [StartingAt], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2023-06-16 10:45:26.944 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ClassDays] ([CookClassId], [Created], [Day], [Deleted], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-16 10:45:26.945 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:45:26.945 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 16.7305ms
2023-06-16 10:45:26.945 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:45:26.945 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 204 - - 28.6543ms
2023-06-16 10:46:13.948 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:46:13.957 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:46:13.958 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:46:13.958 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:46:13.964 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:46:13.972 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:46:13.973 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CookClassDto.CookClassDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:46:13.974 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School) in 16.4391ms
2023-06-16 10:46:13.974 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:46:13.974 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 200 2 application/json;+charset=utf-8 26.2483ms
2023-06-16 10:46:22.967 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/trainees/1/cook-classes?PageNumber=1&PageSize=1 - -
2023-06-16 10:46:22.975 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:46:22.976 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Trainee)
2023-06-16 10:46:22.976 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 10:46:22.977 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/trainees/1/cook-classes?PageNumber=1&PageSize=1 - - - 403 - - 10.1513ms
2023-06-16 10:52:11.794 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:52:12.070 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:52:12.076 +03:00  INF  Hosting environment: Development
2023-06-16 10:52:12.076 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:52:12.104 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:52:12.430 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:52:12.433 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 329.6674ms
2023-06-16 10:52:12.434 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.1678ms
2023-06-16 10:52:12.562 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:52:12.613 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.3049ms
2023-06-16 10:52:13.375 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:52:13.525 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 150.2579ms
2023-06-16 10:52:37.380 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:52:37.972 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:52:37.998 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:52:37.998 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:52:37.998 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:52:38.703 +03:00  INF  Executed DbCommand (38ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:52:38.972 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:52:38.988 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:52:39.158 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:52:54.090 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:54:40.016 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:54:40.257 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:54:40.258 +03:00  INF  Hosting environment: Development
2023-06-16 10:54:40.258 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:54:40.294 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:54:40.648 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 355.3667ms
2023-06-16 10:54:40.959 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:54:40.966 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.6809ms
2023-06-16 10:54:41.028 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:54:41.066 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 37.4033ms
2023-06-16 10:54:41.672 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:54:41.827 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 154.6152ms
2023-06-16 10:54:44.091 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 10:54:44.279 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 7:54:44 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:54:44.305 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 7:54:44 AM'.
2023-06-16 10:54:44.308 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 10:54:44.329 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 10:54:44.538 +03:00  INF  Login Attempt for chefDto 
2023-06-16 10:54:45.103 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:54:45.129 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:54:45.129 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:54:45.129 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:54:45.816 +03:00  INF  Executed DbCommand (37ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:54:45.935 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:54:45.965 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:54:46.044 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 10:54:46.089 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:54:46.101 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:54:46.123 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 1790.5724ms
2023-06-16 10:54:46.124 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 10:54:46.127 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 2035.7802ms
2023-06-16 10:54:58.436 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 115
2023-06-16 10:54:58.483 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:54:58.496 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:54:58.499 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:54:58.516 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-06-16 10:54:58.530 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 31.627ms
2023-06-16 10:54:58.530 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:54:58.531 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 115 - 400 483 application/problem+json;+charset=utf-8 94.4836ms
2023-06-16 10:55:21.696 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 111
2023-06-16 10:55:21.711 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:55:21.719 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:55:21.719 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:55:21.723 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-06-16 10:55:21.724 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 4.334ms
2023-06-16 10:55:21.724 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:55:21.724 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 111 - 400 463 application/problem+json;+charset=utf-8 27.7529ms
2023-06-16 10:55:40.273 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 113
2023-06-16 10:55:40.276 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:55:40.278 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:55:40.278 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:55:40.281 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-06-16 10:55:40.281 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 3.5523ms
2023-06-16 10:55:40.281 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:55:40.281 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 113 - 400 576 application/problem+json;+charset=utf-8 8.7055ms
2023-06-16 10:55:54.559 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 113
2023-06-16 10:55:54.563 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:55:54.564 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:55:54.564 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:55:54.565 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-06-16 10:55:54.566 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 1.8211ms
2023-06-16 10:55:54.566 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:55:54.566 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 113 - 400 463 application/problem+json;+charset=utf-8 6.5221ms
2023-06-16 10:56:09.803 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 10:56:09.807 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:56:09.808 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:56:09.808 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:56:09.819 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:56:09.825 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 10:56:09.833 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 10:56:09.860 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__chefId_0
2023-06-16 10:56:09.908 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CookClasses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [EndingAt], [StartingAt], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2023-06-16 10:56:09.929 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ClassDays] ([CookClassId], [Created], [Day], [Deleted], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-16 10:56:09.930 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:56:09.931 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 122.3584ms
2023-06-16 10:56:09.931 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:56:09.931 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 204 - - 128.6738ms
2023-06-16 10:56:31.309 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 10:56:31.312 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:56:31.316 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:56:31.316 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:56:31.320 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:56:31.321 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 10:56:31.323 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 10:56:31.374 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 57.5372ms
2023-06-16 10:56:31.375 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:56:31.490 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 400 - application/json 180.6337ms
2023-06-16 10:56:36.815 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 10:56:36.818 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:56:36.818 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:56:36.818 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:56:36.821 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:56:36.822 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 10:56:36.823 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 10:56:36.825 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__chefId_0
2023-06-16 10:56:36.829 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CookClasses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [EndingAt], [StartingAt], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2023-06-16 10:56:36.831 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ClassDays] ([CookClassId], [Created], [Day], [Deleted], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-16 10:56:36.831 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 10:56:36.831 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 13.2942ms
2023-06-16 10:56:36.831 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 10:56:36.832 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 204 - - 16.5029ms
2023-06-16 10:56:42.874 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:56:42.877 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:56:42.878 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 10:56:42.883 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 10:56:42.894 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 10:56:49.734 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 10:59:05.620 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 10:59:05.907 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 10:59:05.908 +03:00  INF  Hosting environment: Development
2023-06-16 10:59:05.908 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 10:59:05.950 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 10:59:06.279 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 330.6333ms
2023-06-16 10:59:06.559 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 10:59:06.566 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.1465ms
2023-06-16 10:59:06.640 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 10:59:06.683 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.6067ms
2023-06-16 10:59:07.279 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 10:59:07.473 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.8685ms
2023-06-16 10:59:12.791 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 10:59:12.971 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 7:59:12 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 10:59:12.995 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 7:59:12 AM'.
2023-06-16 10:59:12.997 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 10:59:13.015 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 10:59:13.203 +03:00  INF  Login Attempt for chefDto 
2023-06-16 10:59:13.778 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 10:59:13.803 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:59:13.803 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:59:13.804 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 10:59:14.447 +03:00  INF  Executed DbCommand (40ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 10:59:14.563 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 10:59:14.590 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 10:59:14.668 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 10:59:14.713 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 10:59:14.727 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 10:59:14.749 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 1731.6791ms
2023-06-16 10:59:14.750 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 10:59:14.753 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 753 application/json;+charset=utf-8 1962.2571ms
2023-06-16 10:59:33.443 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 10:59:33.483 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:59:33.499 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 10:59:33.501 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 10:59:33.503 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 403 - - 60.5459ms
2023-06-16 10:59:47.594 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/chefs?PageNumber=1&PageSize=1 - -
2023-06-16 10:59:47.607 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 10:59:47.610 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School)'
2023-06-16 10:59:47.614 +03:00  INF  Route matched with {action = "GetAllChefs", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllChefs(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 10:59:47.673 +03:00  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
2023-06-16 10:59:47.681 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 10:59:47.682 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 10:59:47.690 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 10:59:47.705 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ChefDto.ChefDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 10:59:47.717 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School) in 102.9277ms
2023-06-16 10:59:47.717 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School)'
2023-06-16 10:59:47.717 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/chefs?PageNumber=1&PageSize=1 - - - 200 334 application/json;+charset=utf-8 123.4693ms
2023-06-16 11:00:37.938 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 11:00:37.945 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:00:37 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:00:37.945 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:00:37 AM'.
2023-06-16 11:00:37.946 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:00:37.946 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 11:00:37.956 +03:00  INF  Login Attempt for chefDto 
2023-06-16 11:00:37.961 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:00:37.973 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:00:37.976 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:00:37.983 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:00:37.988 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:00:37.989 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:00:37.990 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 43.7281ms
2023-06-16 11:00:37.990 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:00:37.990 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 54.1399ms
2023-06-16 11:00:50.852 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/admin/chefs?PageNumber=1&PageSize=5 - -
2023-06-16 11:00:50.856 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:00:50.862 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School)'
2023-06-16 11:00:50.862 +03:00  INF  Route matched with {action = "GetAllChefs", controller = "AdminChef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllChefs(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.AdminChefController (Cooking_School).
2023-06-16 11:00:50.864 +03:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
2023-06-16 11:00:50.868 +03:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary]
FROM [Users] AS [u]
WHERE [u].[Discriminator] = N'Chef'
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-06-16 11:00:50.868 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ChefDto.ChefDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:00:50.869 +03:00  INF  Executed action Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School) in 6.7729ms
2023-06-16 11:00:50.869 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.AdminChefController.GetAllChefs (Cooking_School)'
2023-06-16 11:00:50.870 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/admin/chefs?PageNumber=1&PageSize=5 - - - 200 667 application/json;+charset=utf-8 18.0552ms
2023-06-16 11:01:13.089 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 11:01:13.090 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:01:13 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:01:13.090 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:01:13 AM'.
2023-06-16 11:01:13.090 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:01:13.090 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 11:01:13.092 +03:00  INF  Login Attempt for chefDto 
2023-06-16 11:01:13.097 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:01:13.125 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:01:13.127 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:01:13.129 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:01:13.130 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:01:13.131 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:01:13.131 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 40.7178ms
2023-06-16 11:01:13.131 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:01:13.131 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 753 application/json;+charset=utf-8 42.5480ms
2023-06-16 11:01:20.115 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 11:01:20.116 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:01:20 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:01:20.116 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:01:20 AM'.
2023-06-16 11:01:20.116 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:01:20.116 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 11:01:20.117 +03:00  INF  Login Attempt for chefDto 
2023-06-16 11:01:20.120 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:01:20.122 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:01:20.124 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:01:20.128 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:01:20.129 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:01:20.129 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 13.2434ms
2023-06-16 11:01:20.130 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:01:20.130 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 14.9872ms
2023-06-16 11:01:37.629 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117
2023-06-16 11:01:37.631 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:01:37.632 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 11:01:37.634 +03:00  INF  Route matched with {action = "CreateClass", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 11:01:37.652 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:01:37.654 +03:00  INF   Attempt Sinup for Cooking_School.Services.Dtos.CookClassDto.CreateCookClassDto 
2023-06-16 11:01:37.661 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__createCookClassDto_CourseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CourseLevel], [c].[CourseName], [c].[Created], [c].[Deleted], [c].[Description], [c].[FavoriteN], [c].[Price], [c].[Updated]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__createCookClassDto_CourseId_0
2023-06-16 11:01:37.680 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__chefId_0
2023-06-16 11:01:37.719 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CookClasses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [EndingAt], [StartingAt], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2023-06-16 11:01:37.740 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ClassDays] ([CookClassId], [Created], [Day], [Deleted], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-16 11:01:37.742 +03:00  INF  Executing OkObjectResult, writing value of type 'null'.
2023-06-16 11:01:37.742 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School) in 107.6653ms
2023-06-16 11:01:37.742 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.CreateClass (Cooking_School)'
2023-06-16 11:01:37.743 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes application/json 117 - 204 - - 113.7543ms
2023-06-16 11:01:42.533 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 11:01:42.536 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:01:42.538 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 11:01:42.538 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 11:01:42.539 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 403 - - 5.8947ms
2023-06-16 11:01:44.850 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 11:01:44.852 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:01:44.853 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Chef)
2023-06-16 11:01:44.853 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 11:01:44.854 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 403 - - 4.6084ms
2023-06-16 11:02:27.266 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - -
2023-06-16 11:02:27.288 +03:00  INF  Executed DbCommand (18ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:02:27.289 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 11:02:27.294 +03:00  INF  Route matched with {action = "GetAllCookClasses", controller = "CookClass"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCookClasses(Cooking_School.Core.ModelUsed.RequestParam) on controller Cooking_School.Controllers.CookClassController (Cooking_School).
2023-06-16 11:02:27.433 +03:00  INF  Executed DbCommand (132ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:02:35.402 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__chefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CookClasses] AS [c]
WHERE [c].[ChefId] = @__chefId_0
2023-06-16 11:02:35.410 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 11:02:35.410 +03:00  WRN  The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2023-06-16 11:02:35.453 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@__chefId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AdminId], [t].[ChefId], [t].[CourseId], [t].[Created], [t].[Deleted], [t].[EndingAt], [t].[StartingAt], [t].[TraineeId], [t].[Updated], [c0].[Id], [c0].[CookClassId], [c0].[Created], [c0].[Day], [c0].[Deleted], [c0].[Updated]
FROM (
    SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
    FROM [CookClasses] AS [c]
    WHERE [c].[ChefId] = @__chefId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN [ClassDays] AS [c0] ON [t].[Id] = [c0].[CookClassId]
ORDER BY [t].[Id]
2023-06-16 11:02:37.067 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.CookClassDto.CookClassDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:02:37.074 +03:00  INF  Executed action Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School) in 9779.7319ms
2023-06-16 11:02:37.074 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.CookClassController.GetAllCookClasses (Cooking_School)'
2023-06-16 11:02:37.074 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes?PageNumber=1&PageSize=5 - - - 200 152 application/json;+charset=utf-8 9808.1825ms
2023-06-16 11:03:34.097 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38
2023-06-16 11:03:34.106 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 8:03:34 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:03:34.106 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 8:03:34 AM'.
2023-06-16 11:03:34.106 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 11:03:34.110 +03:00  INF  Route matched with {action = "LogIn", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 11:03:34.114 +03:00  INF  Login Attempt for traineeDto 
2023-06-16 11:03:34.116 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:03:34.130 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:03:34.135 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:03:34.142 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:03:34.143 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:03:34.144 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:03:34.144 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.LogIn (Cooking_School) in 34.7894ms
2023-06-16 11:03:34.144 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 11:03:34.145 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38 - 202 731 application/json;+charset=utf-8 47.7685ms
2023-06-16 11:04:00.755 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes/6/applications - 0
2023-06-16 11:04:00.758 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:04:00.763 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.ApplayTraineeToclass (Cooking_School)'
2023-06-16 11:04:00.766 +03:00  INF  Route matched with {action = "ApplayTraineeToclass", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApplayTraineeToclass(Int32, Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:04:00.771 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:04:00.775 +03:00  INF  Attempt Sinup for Application 
2023-06-16 11:04:00.784 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
FROM [CookClasses] AS [c]
WHERE [c].[Id] = @__classId_0
2023-06-16 11:04:00.792 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__traineeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__traineeId_0
2023-06-16 11:04:00.810 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Applications] ([CookClassId], [Created], [DateOfApplay], [Deleted], [TraineeId], [Updated], [status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2023-06-16 11:04:00.823 +03:00  INF  Executing OkObjectResult, writing value of type 'System.String'.
2023-06-16 11:04:00.823 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.ApplayTraineeToclass (Cooking_School) in 57.4537ms
2023-06-16 11:04:00.823 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.ApplayTraineeToclass (Cooking_School)'
2023-06-16 11:04:00.824 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes/6/applications - 0 - 200 - text/plain;+charset=utf-8 68.6738ms
2023-06-16 11:04:06.726 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - -
2023-06-16 11:04:06.729 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:04:06.730 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator|Chef)
2023-06-16 11:04:06.730 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 11:04:06.731 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - - - 403 - - 4.2035ms
2023-06-16 11:04:13.717 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - -
2023-06-16 11:04:13.721 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:04:13.723 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator|Chef)
2023-06-16 11:04:13.723 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 11:04:13.724 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - - - 403 - - 6.3533ms
2023-06-16 11:04:53.932 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 11:04:53.933 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:04:53 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:04:53.933 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:04:53 AM'.
2023-06-16 11:04:53.934 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:04:53.934 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 11:04:53.935 +03:00  INF  Login Attempt for chefDto 
2023-06-16 11:04:53.942 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:04:53.947 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:04:53.949 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:04:53.951 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:04:53.953 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:04:53.954 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:04:53.955 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 20.9158ms
2023-06-16 11:04:53.955 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:04:53.955 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 23.2698ms
2023-06-16 11:05:14.466 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - -
2023-06-16 11:05:14.468 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:05:14.469 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:05:14.473 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:05:14.474 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:05:14.476 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:05:14.491 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
FROM [CookClasses] AS [c]
WHERE [c].[Id] = @__cheefId_0
2023-06-16 11:06:26.282 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:06:26.287 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:06:28.309 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:06:28.310 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:06:28.311 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:06:28.313 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 73840.4042ms
2023-06-16 11:06:28.313 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:06:28.319 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
FROM [CookClasses] AS [c]
WHERE [c].[Id] = @__cheefId_0
2023-06-16 11:06:28.321 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:06:33.527 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 5217.4039ms
2023-06-16 11:06:33.528 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:06:33.528 +03:00  ERR  An unhandled exception has occurred while executing the request.System.NullReferenceException: Object reference not set to an instance of an object.
   at Cooking_School.Services.ApplicationService.ApplicationSevice.GetAllApplicationsToChef(Int32 cheefId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\ApplicationService\ApplicationSevice.cs:line 100
   at Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef(Int32 chefId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\ApplicationController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 11:06:35.294 +03:00  ERR  An unhandled exception has occurred while executing the request.System.NullReferenceException: Object reference not set to an instance of an object.
   at Cooking_School.Services.ApplicationService.ApplicationSevice.GetAllApplicationsToChef(Int32 cheefId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\ApplicationService\ApplicationSevice.cs:line 100
   at Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef(Int32 chefId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\ApplicationController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 11:06:35.322 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/1/applications - - - 500 - text/plain;+charset=utf-8 80855.7724ms
2023-06-16 11:06:35.322 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 500 - text/plain;+charset=utf-8 9039.7247ms
2023-06-16 11:06:38.661 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:06:38.663 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:06:38.664 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:06:38.664 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:06:38.664 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:06:38.665 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:06:38.668 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
FROM [CookClasses] AS [c]
WHERE [c].[Id] = @__cheefId_0
2023-06-16 11:07:51.605 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 11:07:51.844 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 11:07:51.849 +03:00  INF  Hosting environment: Development
2023-06-16 11:07:51.849 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 11:07:51.874 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 11:07:52.193 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 319.0926ms
2023-06-16 11:07:52.469 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 11:07:52.472 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 2.7736ms
2023-06-16 11:07:52.543 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 11:07:52.575 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 31.9856ms
2023-06-16 11:07:53.263 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 11:07:53.389 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 125.3008ms
2023-06-16 11:08:01.499 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:08:02.024 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 11:08:02.047 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:08:02.047 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:08:02.047 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:08:02.715 +03:00  INF  Executed DbCommand (40ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:08:02.919 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:08:02.932 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:08:03.009 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:08:03.024 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:08:03.203 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:08:03.221 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:08:03.262 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 326.7425ms
2023-06-16 11:08:03.263 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:08:03.268 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 1768.5036ms
2023-06-16 11:08:36.166 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:08:36.215 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:08:36.221 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:08:36.222 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:08:36.223 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:08:36.226 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:08:36.233 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:24:47.005 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 11:24:47.375 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 11:24:47.376 +03:00  INF  Hosting environment: Development
2023-06-16 11:24:47.376 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 11:24:47.434 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 11:24:47.895 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 461.1052ms
2023-06-16 11:24:48.199 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 11:24:48.199 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:24:48.204 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 4.5360ms
2023-06-16 11:24:48.297 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 11:24:48.349 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 52.1986ms
2023-06-16 11:24:49.004 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 11:24:49.126 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 11:24:49.165 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:24:49.166 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:24:49.166 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:24:49.213 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.0044ms
2023-06-16 11:24:50.250 +03:00  INF  Executed DbCommand (58ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:24:50.584 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:24:50.612 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:24:50.745 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:24:50.763 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:24:50.983 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:24:51.013 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:24:51.081 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 466.4749ms
2023-06-16 11:24:51.082 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:24:51.085 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 2886.7465ms
2023-06-16 11:25:05.599 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38
2023-06-16 11:25:05.625 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 8:25:05 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:25:05.652 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/9/2023 7:08:00 AM', Current time: '6/16/2023 8:25:05 AM'.
2023-06-16 11:25:05.652 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 11:25:05.656 +03:00  INF  Route matched with {action = "LogIn", controller = "Trainee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.TraineeController (Cooking_School).
2023-06-16 11:25:05.767 +03:00  INF  Login Attempt for traineeDto 
2023-06-16 11:25:05.814 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:25:05.834 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:25:05.853 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:25:05.955 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:25:06.010 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:25:06.025 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:25:06.033 +03:00  INF  Executed action Cooking_School.Controllers.TraineeController.LogIn (Cooking_School) in 376.4785ms
2023-06-16 11:25:06.033 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.TraineeController.LogIn (Cooking_School)'
2023-06-16 11:25:06.033 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/trainees/login application/json 38 - 202 731 application/json;+charset=utf-8 434.6065ms
2023-06-16 11:25:31.720 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/cook-classes/6/applications - 0
2023-06-16 11:25:31.736 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:25:31.767 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.ApplayTraineeToclass (Cooking_School)'
2023-06-16 11:25:31.768 +03:00  INF  Route matched with {action = "ApplayTraineeToclass", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApplayTraineeToclass(Int32, Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:25:31.775 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:25:31.776 +03:00  INF  Attempt Sinup for Application 
2023-06-16 11:25:31.782 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
FROM [CookClasses] AS [c]
WHERE [c].[Id] = @__classId_0
2023-06-16 11:25:31.807 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__traineeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Id] = @__traineeId_0
2023-06-16 11:25:31.832 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Applications] ([CookClassId], [Created], [DateOfApplay], [Deleted], [TraineeId], [Updated], [status])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2023-06-16 11:25:31.851 +03:00  INF  Executing OkObjectResult, writing value of type 'System.String'.
2023-06-16 11:25:31.852 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.ApplayTraineeToclass (Cooking_School) in 83.6382ms
2023-06-16 11:25:31.852 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.ApplayTraineeToclass (Cooking_School)'
2023-06-16 11:25:31.853 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/cook-classes/6/applications - 0 - 200 - text/plain;+charset=utf-8 132.8989ms
2023-06-16 11:25:38.694 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:25:38.696 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:25:38.701 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator|Chef)
2023-06-16 11:25:38.703 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2023-06-16 11:25:38.706 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 403 - - 12.6906ms
2023-06-16 11:25:47.134 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 11:25:47.136 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:25:47 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:25:47.138 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:25:47 AM'.
2023-06-16 11:25:47.138 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:25:47.141 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 11:25:47.146 +03:00  INF  Login Attempt for chefDto 
2023-06-16 11:25:47.148 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:25:47.151 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:25:47.154 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:25:47.162 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:25:47.164 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:25:47.165 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:25:47.165 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 24.0203ms
2023-06-16 11:25:47.165 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:25:47.166 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 31.3447ms
2023-06-16 11:26:06.276 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:06.279 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:06.280 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:06.280 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:06.281 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:06.284 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:06.286 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:06.289 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:06.290 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 9.889ms
2023-06-16 11:26:06.290 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:06.290 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 14.5830ms
2023-06-16 11:26:07.615 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:07.618 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:07.619 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:07.619 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:07.620 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:07.624 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:07.626 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:07.626 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:07.627 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 7.6482ms
2023-06-16 11:26:07.627 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:07.627 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 12.3277ms
2023-06-16 11:26:08.650 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:08.653 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:08.654 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:08.654 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:08.654 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:08.658 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:08.660 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:08.661 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:08.661 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 7.1567ms
2023-06-16 11:26:08.661 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:08.661 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 11.3631ms
2023-06-16 11:26:09.613 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:09.616 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:09.617 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:09.617 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:09.617 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:09.618 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:09.622 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:09.623 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:09.623 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 6.5567ms
2023-06-16 11:26:09.623 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:09.624 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 10.0591ms
2023-06-16 11:26:10.149 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:10.152 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:10.152 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:10.152 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:10.152 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:10.156 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:10.158 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:10.158 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:10.158 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 5.9986ms
2023-06-16 11:26:10.158 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:10.159 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 9.4040ms
2023-06-16 11:26:10.673 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:10.676 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:10.676 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:10.676 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:10.677 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:10.678 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:10.681 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:10.681 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:10.682 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 5.2463ms
2023-06-16 11:26:10.682 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:10.682 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 8.5306ms
2023-06-16 11:26:11.134 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:26:11.138 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:11.139 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:11.139 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:11.140 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:26:11.141 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:26:11.144 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:26:11.144 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:11.145 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 5.357ms
2023-06-16 11:26:11.145 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:26:11.145 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 2 application/json;+charset=utf-8 10.8244ms
2023-06-16 11:26:18.167 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/cook-classes/6/applications - -
2023-06-16 11:26:18.173 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:26:18.174 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School)'
2023-06-16 11:26:18.177 +03:00  INF  Route matched with {action = "GetAllApplicationToClass", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationToClass(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:26:18.178 +03:00  INF  Attempt To Accept Application Application
2023-06-16 11:26:18.198 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__classId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AdminId], [t].[ChefId], [t].[CourseId], [t].[Created], [t].[Deleted], [t].[EndingAt], [t].[StartingAt], [t].[TraineeId], [t].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated]
    FROM [CookClasses] AS [c]
    WHERE [c].[Id] = @__classId_0
) AS [t]
LEFT JOIN [Applications] AS [a] ON [t].[Id] = [a].[CookClassId]
ORDER BY [t].[Id]
2023-06-16 11:26:18.199 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:26:18.233 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School) in 55.9291ms
2023-06-16 11:26:18.233 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationToClass (Cooking_School)'
2023-06-16 11:26:18.233 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/cook-classes/6/applications - - - 200 757 application/json;+charset=utf-8 65.7598ms
2023-06-16 11:27:35.378 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:27:35.387 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:27:35.390 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:27:35.390 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:27:35.390 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:27:35.393 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:27:35.399 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[Id] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:29:33.742 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 11:29:33.967 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 11:29:33.972 +03:00  INF  Hosting environment: Development
2023-06-16 11:29:33.972 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 11:29:33.998 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 11:29:34.347 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 11:29:34.348 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 351.1733ms
2023-06-16 11:29:34.353 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.0953ms
2023-06-16 11:29:34.666 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 11:29:34.741 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 74.8238ms
2023-06-16 11:29:35.185 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 11:29:35.215 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/favicon-32x32.png - -
2023-06-16 11:29:35.241 +03:00  INF  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-06-16 11:29:35.241 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/favicon-32x32.png - - - 200 628 image/png 25.6711ms
2023-06-16 11:29:35.398 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.2452ms
2023-06-16 11:29:38.013 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:29:38.819 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 11:29:38.850 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:29:38.850 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:29:38.851 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:29:39.666 +03:00  INF  Executed DbCommand (55ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:29:39.948 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:29:39.966 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:29:40.062 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:29:40.079 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:29:40.276 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[ChefId] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:29:48.511 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:29:48.590 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 8621.0288ms
2023-06-16 11:29:48.591 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:29:48.594 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 757 application/json;+charset=utf-8 10580.5380ms
2023-06-16 11:45:12.138 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0
2023-06-16 11:45:12.196 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:45:12.201 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:45:12.204 +03:00  INF  Route matched with {action = "AcceptApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptApplication(Int32, Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:45:12.207 +03:00  INF  Attempt To Accept Application Application
2023-06-16 11:45:12.216 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 11:45:12.255 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School) in 50.1195ms
2023-06-16 11:45:12.256 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:45:12.378 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0 - 400 - application/json 240.1149ms
2023-06-16 11:45:25.732 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/reject application/json 109
2023-06-16 11:45:25.747 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:45:25.756 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.RejectApplication (Cooking_School)'
2023-06-16 11:45:25.758 +03:00  INF  Route matched with {action = "RejectApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RejectApplication(Int32, Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:45:25.761 +03:00  INF  Attempt To Reject Application Application
2023-06-16 11:45:25.765 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 11:45:25.796 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.RejectApplication (Cooking_School) in 37.4809ms
2023-06-16 11:45:25.796 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.RejectApplication (Cooking_School)'
2023-06-16 11:45:25.881 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/applications/1/reject application/json 109 - 400 - application/json 148.9442ms
2023-06-16 11:56:03.044 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 11:56:03.420 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 11:56:03.421 +03:00  INF  Hosting environment: Development
2023-06-16 11:56:03.421 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 11:56:03.485 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 11:56:03.991 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 507.5030ms
2023-06-16 11:56:04.007 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 11:56:04.014 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.5206ms
2023-06-16 11:56:04.734 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 11:56:04.780 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 46.1314ms
2023-06-16 11:56:05.799 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 11:56:06.014 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 215.1674ms
2023-06-16 11:56:06.298 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:56:07.230 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 11:56:07.275 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:56:07.276 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:56:07.276 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:56:10.124 +03:00  INF  Executed DbCommand (67ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:56:10.540 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 8:45:47 AM', Current time: '6/16/2023 8:56:10 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:56:10.575 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 8:45:47 AM', Current time: '6/16/2023 8:56:10 AM'.
2023-06-16 11:56:10.584 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator|Chef)
2023-06-16 11:56:10.592 +03:00  INF  AuthenticationScheme: Bearer was challenged.
2023-06-16 11:56:10.598 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 401 - - 4299.6691ms
2023-06-16 11:56:19.369 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38
2023-06-16 11:56:19.376 +03:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:56:19 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-06-16 11:56:19.376 +03:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '6/16/2023 6:49:52 AM', Current time: '6/16/2023 8:56:19 AM'.
2023-06-16 11:56:19.378 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:56:19.401 +03:00  INF  Route matched with {action = "LogIn", controller = "Chef"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogIn(Cooking_School.Services.Dtos.UserDto.UserLoginDto) on controller Cooking_School.Controllers.ChefController (Cooking_School).
2023-06-16 11:56:19.701 +03:00  INF  Login Attempt for chefDto 
2023-06-16 11:56:19.761 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__userLoginDto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userLoginDto_Id_0 = [u].[Id]
2023-06-16 11:56:19.900 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE @__userId_0 = [u].[Id]
2023-06-16 11:56:19.932 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__refreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ExpirationDate], [r].[IssuedDate], [r].[Token], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__refreshToken_UserId_0
2023-06-16 11:56:20.045 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [RefreshTokens]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-16 11:56:20.112 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpirationDate], [IssuedDate], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2023-06-16 11:56:20.137 +03:00  INF  Executing AcceptedResult, writing value of type 'Cooking_School.Core.ModelUsed.TokenRequest'.
2023-06-16 11:56:20.172 +03:00  INF  Executed action Cooking_School.Controllers.ChefController.LogIn (Cooking_School) in 767.0562ms
2023-06-16 11:56:20.175 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ChefController.LogIn (Cooking_School)'
2023-06-16 11:56:20.176 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/chefs/login application/json 38 - 202 729 application/json;+charset=utf-8 807.1162ms
2023-06-16 11:56:47.334 +03:00  INF  Request starting HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - -
2023-06-16 11:56:47.355 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:56:47.369 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:56:47.376 +03:00  INF  Route matched with {action = "GetAllApplicationsToChef", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllApplicationsToChef(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:56:47.380 +03:00  INF  Attempt To GetAll Application
2023-06-16 11:56:47.395 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[BirthDate], [u].[Created], [u].[Deleted], [u].[Discriminator], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHashed], [u].[PasswordSlot], [u].[PhoneNumber], [u].[Updated], [u].[CvPath], [u].[FavoriteN], [u].[Salary], [u].[CardN], [u].[ImagePath], [u].[Level]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0
2023-06-16 11:56:47.501 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__cheefId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AdminId], [c].[ChefId], [c].[CourseId], [c].[Created], [c].[Deleted], [c].[EndingAt], [c].[StartingAt], [c].[TraineeId], [c].[Updated], [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [CookClasses] AS [c]
LEFT JOIN [Applications] AS [a] ON [c].[Id] = [a].[CookClassId]
WHERE [c].[ChefId] = @__cheefId_0
ORDER BY [c].[Id]
2023-06-16 11:56:47.531 +03:00  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cooking_School.Services.Dtos.ApplicationDto.ApplicationDTO, Cooking_School.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-16 11:56:47.548 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School) in 172.1234ms
2023-06-16 11:56:47.548 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.GetAllApplicationsToChef (Cooking_School)'
2023-06-16 11:56:47.548 +03:00  INF  Request finished HTTP/1.1 GET https://localhost:44359/api/chefs/3/applications - - - 200 259 application/json;+charset=utf-8 213.9376ms
2023-06-16 11:57:07.763 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0
2023-06-16 11:57:07.773 +03:00  INF  Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:57:07.780 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:57:07.783 +03:00  INF  Route matched with {action = "AcceptApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptApplication(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:57:07.785 +03:00  INF  Attempt To Accept Application Application
2023-06-16 11:57:07.796 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 11:57:07.880 +03:00  INF  Executed DbCommand (22ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Applications] SET [CookClassId] = @p0, [Created] = @p1, [DateOfApplay] = @p2, [Deleted] = @p3, [TraineeId] = @p4, [Updated] = @p5, [status] = @p6
OUTPUT 1
WHERE [Id] = @p7;
INSERT INTO [Trainee_Courses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [Total_Mark], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2023-06-16 11:57:07.900 +03:00  ERR  An exception occurred in the database while saving changes for context type 'Cooking_School.Core.Models.DBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2023-06-16 11:57:08.066 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School) in 283.1888ms
2023-06-16 11:57:08.067 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:57:08.226 +03:00  ERR  An unhandled exception has occurred while executing the request.Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cooking_School.Infrastructure.Repository.UnitOfWork.Save() in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\Repository\UnitofWork.cs:line 63
   at Cooking_School.Services.ApplicationService.ApplicationSevice.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\ApplicationService\ApplicationSevice.cs:line 40
   at Cooking_School.Controllers.ApplicationController.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\ApplicationController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 11:57:08.259 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0 - 500 - text/plain;+charset=utf-8 495.8582ms
2023-06-16 11:59:00.317 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0
2023-06-16 11:59:00.320 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:59:00.322 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:59:00.323 +03:00  INF  Route matched with {action = "AcceptApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptApplication(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:59:00.324 +03:00  INF  Attempt To Accept Application Application
2023-06-16 11:59:00.327 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 11:59:00.335 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Applications] SET [CookClassId] = @p0, [Created] = @p1, [DateOfApplay] = @p2, [Deleted] = @p3, [TraineeId] = @p4, [Updated] = @p5, [status] = @p6
OUTPUT 1
WHERE [Id] = @p7;
INSERT INTO [Trainee_Courses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [Total_Mark], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2023-06-16 11:59:00.340 +03:00  ERR  An exception occurred in the database while saving changes for context type 'Cooking_School.Core.Models.DBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2023-06-16 11:59:00.428 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School) in 105.1814ms
2023-06-16 11:59:00.429 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:59:00.549 +03:00  ERR  An unhandled exception has occurred while executing the request.Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cooking_School.Infrastructure.Repository.UnitOfWork.Save() in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\Repository\UnitofWork.cs:line 63
   at Cooking_School.Services.ApplicationService.ApplicationSevice.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\ApplicationService\ApplicationSevice.cs:line 40
   at Cooking_School.Controllers.ApplicationController.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\ApplicationController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 11:59:00.552 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0 - 500 - text/plain;+charset=utf-8 236.0003ms
2023-06-16 11:59:01.593 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0
2023-06-16 11:59:01.595 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:59:01.596 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:59:01.596 +03:00  INF  Route matched with {action = "AcceptApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptApplication(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:59:01.596 +03:00  INF  Attempt To Accept Application Application
2023-06-16 11:59:01.598 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 11:59:01.603 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Applications] SET [CookClassId] = @p0, [Created] = @p1, [DateOfApplay] = @p2, [Deleted] = @p3, [TraineeId] = @p4, [Updated] = @p5, [status] = @p6
OUTPUT 1
WHERE [Id] = @p7;
INSERT INTO [Trainee_Courses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [Total_Mark], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2023-06-16 11:59:01.608 +03:00  ERR  An exception occurred in the database while saving changes for context type 'Cooking_School.Core.Models.DBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2023-06-16 11:59:01.702 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School) in 105.7393ms
2023-06-16 11:59:01.702 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:59:01.849 +03:00  ERR  An unhandled exception has occurred while executing the request.Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d10d81ff-c124-4a17-b8d8-7f41f96db249
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cooking_School.Infrastructure.Repository.UnitOfWork.Save() in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\Repository\UnitofWork.cs:line 63
   at Cooking_School.Services.ApplicationService.ApplicationSevice.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\ApplicationService\ApplicationSevice.cs:line 40
   at Cooking_School.Controllers.ApplicationController.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\ApplicationController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 11:59:01.853 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0 - 500 - text/plain;+charset=utf-8 260.1639ms
2023-06-16 11:59:29.920 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 11:59:30.148 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 11:59:30.148 +03:00  INF  Hosting environment: Development
2023-06-16 11:59:30.149 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 11:59:30.184 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 11:59:30.536 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 11:59:30.536 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 352.4847ms
2023-06-16 11:59:30.543 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 6.0098ms
2023-06-16 11:59:30.705 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_vs/browserLink - -
2023-06-16 11:59:30.765 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 59.0680ms
2023-06-16 11:59:31.199 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - -
2023-06-16 11:59:31.395 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.4015ms
2023-06-16 11:59:39.668 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0
2023-06-16 11:59:40.417 +03:00  WRN  The foreign key property 'Favorite_Chef.ChefId1' was created in shadow state because a conflicting property with the simple name 'ChefId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-06-16 11:59:40.460 +03:00  WRN  No store type was specified for the decimal property 'Salary' on entity type 'Chef'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:59:40.460 +03:00  WRN  No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:59:40.460 +03:00  WRN  No store type was specified for the decimal property 'Evalution' on entity type 'ProjectTrainee'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2023-06-16 11:59:41.575 +03:00  INF  Executed DbCommand (49ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 11:59:41.902 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:59:41.927 +03:00  INF  Route matched with {action = "AcceptApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptApplication(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 11:59:42.076 +03:00  INF  Attempt To Accept Application Application
2023-06-16 11:59:42.094 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 11:59:42.267 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Applications] SET [CookClassId] = @p0, [Created] = @p1, [DateOfApplay] = @p2, [Deleted] = @p3, [TraineeId] = @p4, [Updated] = @p5, [status] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-06-16 11:59:42.379 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trainee_Courses] ([AdminId], [ChefId], [CourseId], [Created], [Deleted], [Total_Mark], [TraineeId], [Updated])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2023-06-16 11:59:42.414 +03:00  ERR  An exception occurred in the database while saving changes for context type 'Cooking_School.Core.Models.DBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4d41a66-c3ae-4955-a322-2640ab88b06c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4d41a66-c3ae-4955-a322-2640ab88b06c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2023-06-16 11:59:42.565 +03:00  INF  Executed action Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School) in 634.4362ms
2023-06-16 11:59:42.567 +03:00  INF  Executed endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 11:59:42.750 +03:00  ERR  An unhandled exception has occurred while executing the request.Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Trainee_Courses_Courses_CourseId". The conflict occurred in database "CookingSchool_DB", table "dbo.Courses", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4d41a66-c3ae-4955-a322-2640ab88b06c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cooking_School.Infrastructure.Repository.UnitOfWork.Save() in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\Repository\UnitofWork.cs:line 63
   at Cooking_School.Services.ApplicationService.ApplicationSevice.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School.Services\Services\ApplicationService\ApplicationSevice.cs:line 41
   at Cooking_School.Controllers.ApplicationController.AcceptApplication(Int32 applicationId) in C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School\Controllers\ApplicationController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ValidationToken.InvokeAsync(HttpContext context, IUnitOfWork unitOfWork) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ValidationToken.cs:line 40
   at Cooking_School.Infrastructure.MiddlewareHandlingEx.ErrorHandlingMiddlewareExtensions.Invoke(HttpContext context) in C:\Desktop\workspace1\Cooking_School_ASP.NET\CookingSchool.Infrastructure\MiddlewareHandlingEx\ErrorHandlingMiddlewareExtensions.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-06-16 11:59:42.782 +03:00  INF  Request finished HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0 - 500 - text/plain;+charset=utf-8 3114.0531ms
2023-06-16 12:00:54.593 +03:00  INF  Request starting HTTP/1.1 POST https://localhost:44359/api/applications/1/accept - 0
2023-06-16 12:00:54.650 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Created], [b].[Deleted], [b].[Invalid_Token], [b].[Updated]
FROM [BlackLists] AS [b]
WHERE [b].[Invalid_Token] = @__token_0
2023-06-16 12:00:54.657 +03:00  INF  Executing endpoint 'Cooking_School.Controllers.ApplicationController.AcceptApplication (Cooking_School)'
2023-06-16 12:00:54.658 +03:00  INF  Route matched with {action = "AcceptApplication", controller = "Application"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AcceptApplication(Int32) on controller Cooking_School.Controllers.ApplicationController (Cooking_School).
2023-06-16 12:00:54.659 +03:00  INF  Attempt To Accept Application Application
2023-06-16 12:00:54.663 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__applicationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CookClassId], [a].[Created], [a].[DateOfApplay], [a].[Deleted], [a].[TraineeId], [a].[Updated], [a].[status]
FROM [Applications] AS [a]
WHERE [a].[Id] = @__applicationId_0
2023-06-16 12:00:54.697 +03:00  INF  Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Applications] SET [CookClassId] = @p0, [Created] = @p1, [DateOfApplay] = @p2, [Deleted] = @p3, [TraineeId] = @p4, [Updated] = @p5, [status] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-06-16 12:04:32.501 +03:00  INF  User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-16 12:04:32.725 +03:00  INF  Application started. Press Ctrl+C to shut down.
2023-06-16 12:04:32.730 +03:00  INF  Hosting environment: Development
2023-06-16 12:04:32.730 +03:00  INF  Content root path: C:\Desktop\workspace1\Cooking_School_ASP.NET\Cooking_School
2023-06-16 12:04:32.755 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/swagger/index.html - -
2023-06-16 12:04:33.130 +03:00  INF  Request starting HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - -
2023-06-16 12:04:33.130 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/swagger/index.html - - - 200 - text/html;charset=utf-8 354.9547ms
2023-06-16 12:04:33.138 +03:00  INF  Request finished HTTP/2 GET https://localhost:44359/_framework/aspnetcore-browser-refresh.js - - - 200 11998 application/javascript;+charset=utf-8 3.4060ms
